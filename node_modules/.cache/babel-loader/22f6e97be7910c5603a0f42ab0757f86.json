{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _getContext = require('recompose/getContext');\n\nvar _getContext2 = _interopRequireDefault(_getContext);\n\nvar _types = require('./types');\n\nvar _getMissingAuthClientError = require('../util/getMissingAuthClientError');\n\nvar _getMissingAuthClientError2 = _interopRequireDefault(_getMissingAuthClientError);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function (BaseComponent) {\n  var WithPermissionsFilteredChildren = function (_Component) {\n    (0, _inherits3.default)(WithPermissionsFilteredChildren, _Component);\n\n    function WithPermissionsFilteredChildren() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      (0, _classCallCheck3.default)(this, WithPermissionsFilteredChildren);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = WithPermissionsFilteredChildren.__proto__ || Object.getPrototypeOf(WithPermissionsFilteredChildren)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n        children: null\n      }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(WithPermissionsFilteredChildren, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        this.initializeChildren(this.props.children);\n      }\n    }, {\n      key: 'initializeChildren',\n      value: function initializeChildren(children) {\n        var _this2 = this;\n\n        if (typeof children === 'function') {\n          if (!this.props.authClient) {\n            throw new Error((0, _getMissingAuthClientError2.default)(BaseComponent.name));\n          }\n\n          this.props.authClient(_types.AUTH_GET_PERMISSIONS).then(function (permissions) {\n            var allowedChildren = children(permissions);\n            allowedChildren = Array.isArray(allowedChildren) ? allowedChildren.filter(function (child) {\n              return !!child;\n            }) : allowedChildren;\n\n            _this2.setState({\n              children: allowedChildren\n            });\n          });\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var childrenFromState = this.state.children;\n        var _props = this.props,\n            authClient = _props.authClient,\n            children = _props.children,\n            props = (0, _objectWithoutProperties3.default)(_props, ['authClient', 'children']);\n        return _react2.default.createElement(BaseComponent, props, typeof children === 'function' ? childrenFromState : children);\n      }\n    }]);\n    return WithPermissionsFilteredChildren;\n  }(_react.Component);\n\n  WithPermissionsFilteredChildren.propTypes = {\n    authClient: _propTypes2.default.func,\n    children: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]).isRequired\n  };\n  return (0, _getContext2.default)({\n    authClient: _propTypes2.default.func\n  })(WithPermissionsFilteredChildren);\n};\n\nmodule.exports = exports['default'];","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/auth/withPermissionsFilteredChildren.js"],"names":["Object","defineProperty","exports","value","_objectWithoutProperties2","require","_objectWithoutProperties3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_getContext","_getContext2","_types","_getMissingAuthClientError","_getMissingAuthClientError2","obj","__esModule","default","BaseComponent","WithPermissionsFilteredChildren","_Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","getPrototypeOf","call","apply","concat","state","children","key","componentDidMount","initializeChildren","props","_this2","authClient","Error","name","AUTH_GET_PERMISSIONS","then","permissions","allowedChildren","isArray","filter","child","setState","render","childrenFromState","_props","createElement","Component","propTypes","func","oneOfType","node","isRequired","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _getContext = require('recompose/getContext');\n\nvar _getContext2 = _interopRequireDefault(_getContext);\n\nvar _types = require('./types');\n\nvar _getMissingAuthClientError = require('../util/getMissingAuthClientError');\n\nvar _getMissingAuthClientError2 = _interopRequireDefault(_getMissingAuthClientError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (BaseComponent) {\n    var WithPermissionsFilteredChildren = function (_Component) {\n        (0, _inherits3.default)(WithPermissionsFilteredChildren, _Component);\n\n        function WithPermissionsFilteredChildren() {\n            var _ref;\n\n            var _temp, _this, _ret;\n\n            (0, _classCallCheck3.default)(this, WithPermissionsFilteredChildren);\n\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = WithPermissionsFilteredChildren.__proto__ || Object.getPrototypeOf(WithPermissionsFilteredChildren)).call.apply(_ref, [this].concat(args))), _this), _this.state = { children: null }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n        }\n\n        (0, _createClass3.default)(WithPermissionsFilteredChildren, [{\n            key: 'componentDidMount',\n            value: function componentDidMount() {\n                this.initializeChildren(this.props.children);\n            }\n        }, {\n            key: 'initializeChildren',\n            value: function initializeChildren(children) {\n                var _this2 = this;\n\n                if (typeof children === 'function') {\n                    if (!this.props.authClient) {\n                        throw new Error((0, _getMissingAuthClientError2.default)(BaseComponent.name));\n                    }\n\n                    this.props.authClient(_types.AUTH_GET_PERMISSIONS).then(function (permissions) {\n                        var allowedChildren = children(permissions);\n                        allowedChildren = Array.isArray(allowedChildren) ? allowedChildren.filter(function (child) {\n                            return !!child;\n                        }) : allowedChildren;\n                        _this2.setState({ children: allowedChildren });\n                    });\n                }\n            }\n        }, {\n            key: 'render',\n            value: function render() {\n                var childrenFromState = this.state.children;\n                var _props = this.props,\n                    authClient = _props.authClient,\n                    children = _props.children,\n                    props = (0, _objectWithoutProperties3.default)(_props, ['authClient', 'children']);\n\n\n                return _react2.default.createElement(\n                    BaseComponent,\n                    props,\n                    typeof children === 'function' ? childrenFromState : children\n                );\n            }\n        }]);\n        return WithPermissionsFilteredChildren;\n    }(_react.Component);\n\n    WithPermissionsFilteredChildren.propTypes = {\n        authClient: _propTypes2.default.func,\n        children: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func]).isRequired\n    };\n\n\n    return (0, _getContext2.default)({\n        authClient: _propTypes2.default.func\n    })(WithPermissionsFilteredChildren);\n};\n\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}