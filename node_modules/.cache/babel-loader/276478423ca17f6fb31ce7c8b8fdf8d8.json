{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AutocompleteInput = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lodash = require('lodash.get');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.isequal');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _AutoComplete = require('material-ui/AutoComplete');\n\nvar _AutoComplete2 = _interopRequireDefault(_AutoComplete);\n\nvar _FieldTitle = require('../../util/FieldTitle');\n\nvar _FieldTitle2 = _interopRequireDefault(_FieldTitle);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * An Input component for an autocomplete field, using an array of objects for the options\n *\n * Pass possible options as an array of objects in the 'choices' attribute.\n *\n * By default, the options are built from:\n *  - the 'id' property as the option value,\n *  - the 'name' property an the option text\n * @example\n * const choices = [\n *    { id: 'M', name: 'Male' },\n *    { id: 'F', name: 'Female' },\n * ];\n * <AutocompleteInput source=\"gender\" choices={choices} />\n *\n * You can also customize the properties to use for the option name and value,\n * thanks to the 'optionText' and 'optionValue' attributes.\n * @example\n * const choices = [\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\n * ];\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\n *\n * `optionText` also accepts a function, so you can shape the option text at will:\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\n *\n * You can customize the `filter` function used to filter the results.\n * By default, it's `AutoComplete.fuzzyFilter`, but you can use any of\n * the functions provided by `AutoComplete`, or a function of your own\n * @see http://www.material-ui.com/#/components/auto-complete\n * @example\n * import { Edit, SimpleForm, AutocompleteInput } from 'admin-on-rest/mui';\n * import AutoComplete from 'material-ui/AutoComplete';\n *\n * export const PostEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <AutocompleteInput source=\"category\" filter={AutoComplete.caseInsensitiveFilter} choices={choices} />\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * The choices are translated by default, so you can use translation identifiers as choices:\n * @example\n * const choices = [\n *    { id: 'M', name: 'myroot.gender.male' },\n *    { id: 'F', name: 'myroot.gender.female' },\n * ];\n *\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\n * @example\n * <AutocompleteInput source=\"gender\" choices={choices} translateChoice={false}/>\n *\n * The object passed as `options` props is passed to the material-ui <AutoComplete> component\n *\n * @example\n * <AutocompleteInput source=\"author_id\" options={{ fullWidth: true }} />\n */\n\n\nvar AutocompleteInput = exports.AutocompleteInput = function (_Component) {\n  (0, _inherits3.default)(AutocompleteInput, _Component);\n\n  function AutocompleteInput() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, AutocompleteInput);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = AutocompleteInput.__proto__ || Object.getPrototypeOf(AutocompleteInput)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.handleNewRequest = function (chosenRequest, index) {\n      var _this$props = _this.props,\n          allowEmpty = _this$props.allowEmpty,\n          choices = _this$props.choices,\n          input = _this$props.input,\n          optionValue = _this$props.optionValue;\n      var choiceIndex = allowEmpty ? index - 1 : index; // The empty item is always at first position\n\n      if (allowEmpty && index === 0) {\n        return input.onChange('');\n      }\n\n      input.onChange(choices[choiceIndex][optionValue]);\n    }, _this.handleUpdateInput = function (searchText) {\n      _this.setState({\n        searchText: searchText\n      });\n\n      var setFilter = _this.props.setFilter;\n      setFilter && setFilter(searchText);\n    }, _this.addAllowEmpty = function (choices) {\n      var _this$props2 = _this.props,\n          allowEmpty = _this$props2.allowEmpty,\n          translate = _this$props2.translate;\n\n      if (allowEmpty) {\n        return [{\n          value: '',\n          text: translate('aor.input.autocomplete.none')\n        }].concat((0, _toConsumableArray3.default)(choices));\n      }\n\n      return choices;\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(AutocompleteInput, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      this.setSearchText(this.props);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (!(0, _lodash4.default)(this.props.choices, nextProps.choices)) {\n        return;\n      }\n\n      if (this.props.input.value !== nextProps.input.value) {\n        this.setSearchText(nextProps);\n      }\n    }\n  }, {\n    key: 'setSearchText',\n    value: function setSearchText(props) {\n      var choices = props.choices,\n          input = props.input,\n          optionValue = props.optionValue,\n          translate = props.translate;\n      var selectedSource = choices.find(function (choice) {\n        return (0, _lodash2.default)(choice, optionValue) === input.value;\n      });\n      var searchText = selectedSource && this.getSuggestion(selectedSource) || translate('aor.input.autocomplete.none');\n      this.setState({\n        searchText: searchText\n      });\n    }\n  }, {\n    key: 'getSuggestion',\n    value: function getSuggestion(choice) {\n      var _props = this.props,\n          optionText = _props.optionText,\n          translate = _props.translate,\n          translateChoice = _props.translateChoice;\n      var choiceName = typeof optionText === 'function' ? optionText(choice) : (0, _lodash2.default)(choice, optionText);\n      return translateChoice ? translate(choiceName, {\n        _: choiceName\n      }) : choiceName;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          choices = _props2.choices,\n          elStyle = _props2.elStyle,\n          filter = _props2.filter,\n          isRequired = _props2.isRequired,\n          label = _props2.label,\n          meta = _props2.meta,\n          options = _props2.options,\n          optionValue = _props2.optionValue,\n          resource = _props2.resource,\n          source = _props2.source;\n\n      if (typeof meta === 'undefined') {\n        throw new Error(\"The AutocompleteInput component wasn't called within a redux-form <Field>. Did you decorate it and forget to add the addField prop to your component? See https://marmelab.com/admin-on-rest/Inputs.html#writing-your-own-input-component for details.\");\n      }\n\n      var touched = meta.touched,\n          error = meta.error;\n      var dataSource = this.addAllowEmpty(choices.map(function (choice) {\n        return {\n          value: (0, _lodash2.default)(choice, optionValue),\n          text: _this2.getSuggestion(choice)\n        };\n      }));\n      return _react2.default.createElement(_AutoComplete2.default, (0, _extends3.default)({\n        searchText: this.state.searchText,\n        dataSource: dataSource,\n        floatingLabelText: _react2.default.createElement(_FieldTitle2.default, {\n          label: label,\n          source: source,\n          resource: resource,\n          isRequired: isRequired\n        }),\n        filter: filter,\n        onNewRequest: this.handleNewRequest,\n        onUpdateInput: this.handleUpdateInput,\n        openOnFocus: true,\n        style: elStyle,\n        errorText: touched && error\n      }, options));\n    }\n  }]);\n  return AutocompleteInput;\n}(_react.Component);\n\nAutocompleteInput.propTypes = {\n  addField: _propTypes2.default.bool.isRequired,\n  allowEmpty: _propTypes2.default.bool.isRequired,\n  choices: _propTypes2.default.arrayOf(_propTypes2.default.object),\n  elStyle: _propTypes2.default.object,\n  filter: _propTypes2.default.func.isRequired,\n  input: _propTypes2.default.object,\n  isRequired: _propTypes2.default.bool,\n  label: _propTypes2.default.string,\n  meta: _propTypes2.default.object,\n  options: _propTypes2.default.object,\n  optionElement: _propTypes2.default.element,\n  optionText: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func]).isRequired,\n  optionValue: _propTypes2.default.string.isRequired,\n  resource: _propTypes2.default.string,\n  setFilter: _propTypes2.default.func,\n  source: _propTypes2.default.string,\n  translate: _propTypes2.default.func.isRequired,\n  translateChoice: _propTypes2.default.bool.isRequired\n};\nAutocompleteInput.defaultProps = {\n  addField: true,\n  choices: [],\n  filter: _AutoComplete2.default.fuzzyFilter,\n  options: {},\n  optionText: 'name',\n  optionValue: 'id',\n  translateChoice: true\n};\nexports.default = (0, _translate2.default)(AutocompleteInput);","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/mui/input/AutocompleteInput.js"],"names":["Object","defineProperty","exports","value","AutocompleteInput","undefined","_extends2","require","_extends3","_interopRequireDefault","_toConsumableArray2","_toConsumableArray3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_lodash","_lodash2","_lodash3","_lodash4","_AutoComplete","_AutoComplete2","_FieldTitle","_FieldTitle2","_translate","_translate2","obj","__esModule","default","_Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","getPrototypeOf","call","apply","concat","state","handleNewRequest","chosenRequest","index","_this$props","props","allowEmpty","choices","input","optionValue","choiceIndex","onChange","handleUpdateInput","searchText","setState","setFilter","addAllowEmpty","_this$props2","translate","text","key","componentWillMount","setSearchText","componentWillReceiveProps","nextProps","selectedSource","find","choice","getSuggestion","_props","optionText","translateChoice","choiceName","_","render","_this2","_props2","elStyle","filter","isRequired","label","meta","options","resource","source","Error","touched","error","dataSource","map","createElement","floatingLabelText","onNewRequest","onUpdateInput","openOnFocus","style","errorText","Component","propTypes","addField","bool","arrayOf","object","func","string","optionElement","element","oneOfType","defaultProps","fuzzyFilter"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.AutocompleteInput = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lodash = require('lodash.get');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.isequal');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _AutoComplete = require('material-ui/AutoComplete');\n\nvar _AutoComplete2 = _interopRequireDefault(_AutoComplete);\n\nvar _FieldTitle = require('../../util/FieldTitle');\n\nvar _FieldTitle2 = _interopRequireDefault(_FieldTitle);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * An Input component for an autocomplete field, using an array of objects for the options\n *\n * Pass possible options as an array of objects in the 'choices' attribute.\n *\n * By default, the options are built from:\n *  - the 'id' property as the option value,\n *  - the 'name' property an the option text\n * @example\n * const choices = [\n *    { id: 'M', name: 'Male' },\n *    { id: 'F', name: 'Female' },\n * ];\n * <AutocompleteInput source=\"gender\" choices={choices} />\n *\n * You can also customize the properties to use for the option name and value,\n * thanks to the 'optionText' and 'optionValue' attributes.\n * @example\n * const choices = [\n *    { _id: 123, full_name: 'Leo Tolstoi', sex: 'M' },\n *    { _id: 456, full_name: 'Jane Austen', sex: 'F' },\n * ];\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText=\"full_name\" optionValue=\"_id\" />\n *\n * `optionText` also accepts a function, so you can shape the option text at will:\n * @example\n * const choices = [\n *    { id: 123, first_name: 'Leo', last_name: 'Tolstoi' },\n *    { id: 456, first_name: 'Jane', last_name: 'Austen' },\n * ];\n * const optionRenderer = choice => `${choice.first_name} ${choice.last_name}`;\n * <AutocompleteInput source=\"author_id\" choices={choices} optionText={optionRenderer} />\n *\n * You can customize the `filter` function used to filter the results.\n * By default, it's `AutoComplete.fuzzyFilter`, but you can use any of\n * the functions provided by `AutoComplete`, or a function of your own\n * @see http://www.material-ui.com/#/components/auto-complete\n * @example\n * import { Edit, SimpleForm, AutocompleteInput } from 'admin-on-rest/mui';\n * import AutoComplete from 'material-ui/AutoComplete';\n *\n * export const PostEdit = (props) => (\n *     <Edit {...props}>\n *         <SimpleForm>\n *             <AutocompleteInput source=\"category\" filter={AutoComplete.caseInsensitiveFilter} choices={choices} />\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * The choices are translated by default, so you can use translation identifiers as choices:\n * @example\n * const choices = [\n *    { id: 'M', name: 'myroot.gender.male' },\n *    { id: 'F', name: 'myroot.gender.female' },\n * ];\n *\n * However, in some cases (e.g. inside a `<ReferenceInput>`), you may not want\n * the choice to be translated. In that case, set the `translateChoice` prop to false.\n * @example\n * <AutocompleteInput source=\"gender\" choices={choices} translateChoice={false}/>\n *\n * The object passed as `options` props is passed to the material-ui <AutoComplete> component\n *\n * @example\n * <AutocompleteInput source=\"author_id\" options={{ fullWidth: true }} />\n */\nvar AutocompleteInput = exports.AutocompleteInput = function (_Component) {\n    (0, _inherits3.default)(AutocompleteInput, _Component);\n\n    function AutocompleteInput() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, AutocompleteInput);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = AutocompleteInput.__proto__ || Object.getPrototypeOf(AutocompleteInput)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.handleNewRequest = function (chosenRequest, index) {\n            var _this$props = _this.props,\n                allowEmpty = _this$props.allowEmpty,\n                choices = _this$props.choices,\n                input = _this$props.input,\n                optionValue = _this$props.optionValue;\n\n            var choiceIndex = allowEmpty ? index - 1 : index;\n\n            // The empty item is always at first position\n            if (allowEmpty && index === 0) {\n                return input.onChange('');\n            }\n\n            input.onChange(choices[choiceIndex][optionValue]);\n        }, _this.handleUpdateInput = function (searchText) {\n            _this.setState({ searchText: searchText });\n            var setFilter = _this.props.setFilter;\n\n            setFilter && setFilter(searchText);\n        }, _this.addAllowEmpty = function (choices) {\n            var _this$props2 = _this.props,\n                allowEmpty = _this$props2.allowEmpty,\n                translate = _this$props2.translate;\n\n\n            if (allowEmpty) {\n                return [{\n                    value: '',\n                    text: translate('aor.input.autocomplete.none')\n                }].concat((0, _toConsumableArray3.default)(choices));\n            }\n\n            return choices;\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(AutocompleteInput, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            this.setSearchText(this.props);\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (!(0, _lodash4.default)(this.props.choices, nextProps.choices)) {\n                return;\n            }\n\n            if (this.props.input.value !== nextProps.input.value) {\n                this.setSearchText(nextProps);\n            }\n        }\n    }, {\n        key: 'setSearchText',\n        value: function setSearchText(props) {\n            var choices = props.choices,\n                input = props.input,\n                optionValue = props.optionValue,\n                translate = props.translate;\n\n\n            var selectedSource = choices.find(function (choice) {\n                return (0, _lodash2.default)(choice, optionValue) === input.value;\n            });\n            var searchText = selectedSource && this.getSuggestion(selectedSource) || translate('aor.input.autocomplete.none');\n            this.setState({ searchText: searchText });\n        }\n    }, {\n        key: 'getSuggestion',\n        value: function getSuggestion(choice) {\n            var _props = this.props,\n                optionText = _props.optionText,\n                translate = _props.translate,\n                translateChoice = _props.translateChoice;\n\n            var choiceName = typeof optionText === 'function' ? optionText(choice) : (0, _lodash2.default)(choice, optionText);\n            return translateChoice ? translate(choiceName, { _: choiceName }) : choiceName;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props2 = this.props,\n                choices = _props2.choices,\n                elStyle = _props2.elStyle,\n                filter = _props2.filter,\n                isRequired = _props2.isRequired,\n                label = _props2.label,\n                meta = _props2.meta,\n                options = _props2.options,\n                optionValue = _props2.optionValue,\n                resource = _props2.resource,\n                source = _props2.source;\n\n            if (typeof meta === 'undefined') {\n                throw new Error(\"The AutocompleteInput component wasn't called within a redux-form <Field>. Did you decorate it and forget to add the addField prop to your component? See https://marmelab.com/admin-on-rest/Inputs.html#writing-your-own-input-component for details.\");\n            }\n            var touched = meta.touched,\n                error = meta.error;\n\n\n            var dataSource = this.addAllowEmpty(choices.map(function (choice) {\n                return {\n                    value: (0, _lodash2.default)(choice, optionValue),\n                    text: _this2.getSuggestion(choice)\n                };\n            }));\n\n            return _react2.default.createElement(_AutoComplete2.default, (0, _extends3.default)({\n                searchText: this.state.searchText,\n                dataSource: dataSource,\n                floatingLabelText: _react2.default.createElement(_FieldTitle2.default, {\n                    label: label,\n                    source: source,\n                    resource: resource,\n                    isRequired: isRequired\n                }),\n                filter: filter,\n                onNewRequest: this.handleNewRequest,\n                onUpdateInput: this.handleUpdateInput,\n                openOnFocus: true,\n                style: elStyle,\n                errorText: touched && error\n            }, options));\n        }\n    }]);\n    return AutocompleteInput;\n}(_react.Component);\n\nAutocompleteInput.propTypes = {\n    addField: _propTypes2.default.bool.isRequired,\n    allowEmpty: _propTypes2.default.bool.isRequired,\n    choices: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    elStyle: _propTypes2.default.object,\n    filter: _propTypes2.default.func.isRequired,\n    input: _propTypes2.default.object,\n    isRequired: _propTypes2.default.bool,\n    label: _propTypes2.default.string,\n    meta: _propTypes2.default.object,\n    options: _propTypes2.default.object,\n    optionElement: _propTypes2.default.element,\n    optionText: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func]).isRequired,\n    optionValue: _propTypes2.default.string.isRequired,\n    resource: _propTypes2.default.string,\n    setFilter: _propTypes2.default.func,\n    source: _propTypes2.default.string,\n    translate: _propTypes2.default.func.isRequired,\n    translateChoice: _propTypes2.default.bool.isRequired\n};\n\nAutocompleteInput.defaultProps = {\n    addField: true,\n    choices: [],\n    filter: _AutoComplete2.default.fuzzyFilter,\n    options: {},\n    optionText: 'name',\n    optionValue: 'id',\n    translateChoice: true\n};\n\nexports.default = (0, _translate2.default)(AutocompleteInput);"]},"metadata":{},"sourceType":"script"}