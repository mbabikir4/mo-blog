{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nimport { ARRAY_INSERT, ARRAY_MOVE, ARRAY_POP, ARRAY_PUSH, ARRAY_REMOVE, ARRAY_REMOVE_ALL, ARRAY_SHIFT, ARRAY_SPLICE, ARRAY_SWAP, ARRAY_UNSHIFT, AUTOFILL, BLUR, CHANGE, CLEAR_ASYNC_ERROR, CLEAR_SUBMIT, CLEAR_SUBMIT_ERRORS, DESTROY, FOCUS, INITIALIZE, prefix, REGISTER_FIELD, RESET, SET_SUBMIT_FAILED, SET_SUBMIT_SUCCEEDED, START_ASYNC_VALIDATION, START_SUBMIT, STOP_ASYNC_VALIDATION, STOP_SUBMIT, SUBMIT, TOUCH, UNREGISTER_FIELD, UNTOUCH, UPDATE_SYNC_ERRORS, UPDATE_SYNC_WARNINGS } from './actionTypes';\nimport createDeleteInWithCleanUp from './deleteInWithCleanUp';\nimport plain from './structure/plain';\n\nvar isReduxFormAction = function isReduxFormAction(action) {\n  return action && action.type && action.type.length > prefix.length && action.type.substring(0, prefix.length) === prefix;\n};\n\nfunction createReducer(structure) {\n  var _behaviors;\n\n  var deepEqual = structure.deepEqual,\n      empty = structure.empty,\n      forEach = structure.forEach,\n      getIn = structure.getIn,\n      setIn = structure.setIn,\n      deleteIn = structure.deleteIn,\n      fromJS = structure.fromJS,\n      keys = structure.keys,\n      size = structure.size,\n      some = structure.some,\n      splice = structure.splice;\n  var deleteInWithCleanUp = createDeleteInWithCleanUp(structure);\n  var plainDeleteInWithCleanUp = createDeleteInWithCleanUp(plain);\n\n  var doSplice = function doSplice(state, key, field, index, removeNum, value, force) {\n    var existing = getIn(state, key + '.' + field);\n    return existing || force ? setIn(state, key + '.' + field, splice(existing, index, removeNum, value)) : state;\n  };\n\n  var doPlainSplice = function doPlainSplice(state, key, field, index, removeNum, value, force) {\n    var slice = getIn(state, key);\n    var existing = plain.getIn(slice, field);\n    return existing || force ? setIn(state, key, plain.setIn(slice, field, plain.splice(existing, index, removeNum, value))) : state;\n  };\n\n  var rootKeys = ['values', 'fields', 'submitErrors', 'asyncErrors'];\n\n  var arraySplice = function arraySplice(state, field, index, removeNum, value) {\n    var result = state;\n    var nonValuesValue = value != null ? empty : undefined;\n    result = doSplice(result, 'values', field, index, removeNum, value, true);\n    result = doSplice(result, 'fields', field, index, removeNum, nonValuesValue);\n    result = doPlainSplice(result, 'syncErrors', field, index, removeNum, undefined);\n    result = doPlainSplice(result, 'syncWarnings', field, index, removeNum, undefined);\n    result = doSplice(result, 'submitErrors', field, index, removeNum, undefined);\n    result = doSplice(result, 'asyncErrors', field, index, removeNum, undefined);\n    return result;\n  };\n\n  var behaviors = (_behaviors = {}, _defineProperty(_behaviors, ARRAY_INSERT, function (state, _ref) {\n    var _ref$meta = _ref.meta,\n        field = _ref$meta.field,\n        index = _ref$meta.index,\n        payload = _ref.payload;\n    return arraySplice(state, field, index, 0, payload);\n  }), _defineProperty(_behaviors, ARRAY_MOVE, function (state, _ref2) {\n    var _ref2$meta = _ref2.meta,\n        field = _ref2$meta.field,\n        from = _ref2$meta.from,\n        to = _ref2$meta.to;\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    var result = state;\n\n    if (length) {\n      rootKeys.forEach(function (key) {\n        var path = key + '.' + field;\n\n        if (getIn(result, path)) {\n          var value = getIn(result, path + '[' + from + ']');\n          result = setIn(result, path, splice(getIn(result, path), from, 1)); // remove\n\n          result = setIn(result, path, splice(getIn(result, path), to, 0, value)); // insert\n        }\n      });\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, ARRAY_POP, function (state, _ref3) {\n    var field = _ref3.meta.field;\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    return length ? arraySplice(state, field, length - 1, 1) : state;\n  }), _defineProperty(_behaviors, ARRAY_PUSH, function (state, _ref4) {\n    var field = _ref4.meta.field,\n        payload = _ref4.payload;\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    return arraySplice(state, field, length, 0, payload);\n  }), _defineProperty(_behaviors, ARRAY_REMOVE, function (state, _ref5) {\n    var _ref5$meta = _ref5.meta,\n        field = _ref5$meta.field,\n        index = _ref5$meta.index;\n    return arraySplice(state, field, index, 1);\n  }), _defineProperty(_behaviors, ARRAY_REMOVE_ALL, function (state, _ref6) {\n    var field = _ref6.meta.field;\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    return length ? arraySplice(state, field, 0, length) : state;\n  }), _defineProperty(_behaviors, ARRAY_SHIFT, function (state, _ref7) {\n    var field = _ref7.meta.field;\n    return arraySplice(state, field, 0, 1);\n  }), _defineProperty(_behaviors, ARRAY_SPLICE, function (state, _ref8) {\n    var _ref8$meta = _ref8.meta,\n        field = _ref8$meta.field,\n        index = _ref8$meta.index,\n        removeNum = _ref8$meta.removeNum,\n        payload = _ref8.payload;\n    return arraySplice(state, field, index, removeNum, payload);\n  }), _defineProperty(_behaviors, ARRAY_SWAP, function (state, _ref9) {\n    var _ref9$meta = _ref9.meta,\n        field = _ref9$meta.field,\n        indexA = _ref9$meta.indexA,\n        indexB = _ref9$meta.indexB;\n    var result = state;\n    rootKeys.forEach(function (key) {\n      var valueA = getIn(result, key + '.' + field + '[' + indexA + ']');\n      var valueB = getIn(result, key + '.' + field + '[' + indexB + ']');\n\n      if (valueA !== undefined || valueB !== undefined) {\n        result = setIn(result, key + '.' + field + '[' + indexA + ']', valueB);\n        result = setIn(result, key + '.' + field + '[' + indexB + ']', valueA);\n      }\n    });\n    return result;\n  }), _defineProperty(_behaviors, ARRAY_UNSHIFT, function (state, _ref10) {\n    var field = _ref10.meta.field,\n        payload = _ref10.payload;\n    return arraySplice(state, field, 0, 0, payload);\n  }), _defineProperty(_behaviors, AUTOFILL, function (state, _ref11) {\n    var field = _ref11.meta.field,\n        payload = _ref11.payload;\n    var result = state;\n    result = deleteInWithCleanUp(result, 'asyncErrors.' + field);\n    result = deleteInWithCleanUp(result, 'submitErrors.' + field);\n    result = setIn(result, 'fields.' + field + '.autofilled', true);\n    result = setIn(result, 'values.' + field, payload);\n    return result;\n  }), _defineProperty(_behaviors, BLUR, function (state, _ref12) {\n    var _ref12$meta = _ref12.meta,\n        field = _ref12$meta.field,\n        touch = _ref12$meta.touch,\n        payload = _ref12.payload;\n    var result = state;\n    var initial = getIn(result, 'initial.' + field);\n\n    if (initial === undefined && payload === '') {\n      result = deleteInWithCleanUp(result, 'values.' + field);\n    } else if (payload !== undefined) {\n      result = setIn(result, 'values.' + field, payload);\n    }\n\n    if (field === getIn(result, 'active')) {\n      result = deleteIn(result, 'active');\n    }\n\n    result = deleteIn(result, 'fields.' + field + '.active');\n\n    if (touch) {\n      result = setIn(result, 'fields.' + field + '.touched', true);\n      result = setIn(result, 'anyTouched', true);\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, CHANGE, function (state, _ref13) {\n    var _ref13$meta = _ref13.meta,\n        field = _ref13$meta.field,\n        touch = _ref13$meta.touch,\n        persistentSubmitErrors = _ref13$meta.persistentSubmitErrors,\n        payload = _ref13.payload;\n    var result = state;\n    var initial = getIn(result, 'initial.' + field);\n\n    if (initial === undefined && payload === '') {\n      result = deleteInWithCleanUp(result, 'values.' + field);\n    } else if (payload !== undefined) {\n      result = setIn(result, 'values.' + field, payload);\n    }\n\n    result = deleteInWithCleanUp(result, 'asyncErrors.' + field);\n\n    if (!persistentSubmitErrors) {\n      result = deleteInWithCleanUp(result, 'submitErrors.' + field);\n    }\n\n    result = deleteInWithCleanUp(result, 'fields.' + field + '.autofilled');\n\n    if (touch) {\n      result = setIn(result, 'fields.' + field + '.touched', true);\n      result = setIn(result, 'anyTouched', true);\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, CLEAR_SUBMIT, function (state) {\n    return deleteIn(state, 'triggerSubmit');\n  }), _defineProperty(_behaviors, CLEAR_SUBMIT_ERRORS, function (state) {\n    var result = state;\n    result = deleteInWithCleanUp(result, 'submitErrors');\n    result = deleteIn(result, 'error');\n    return result;\n  }), _defineProperty(_behaviors, CLEAR_ASYNC_ERROR, function (state, _ref14) {\n    var field = _ref14.meta.field;\n    return deleteIn(state, 'asyncErrors.' + field);\n  }), _defineProperty(_behaviors, FOCUS, function (state, _ref15) {\n    var field = _ref15.meta.field;\n    var result = state;\n    var previouslyActive = getIn(state, 'active');\n    result = deleteIn(result, 'fields.' + previouslyActive + '.active');\n    result = setIn(result, 'fields.' + field + '.visited', true);\n    result = setIn(result, 'fields.' + field + '.active', true);\n    result = setIn(result, 'active', field);\n    return result;\n  }), _defineProperty(_behaviors, INITIALIZE, function (state, _ref16) {\n    var payload = _ref16.payload,\n        _ref16$meta = _ref16.meta,\n        keepDirty = _ref16$meta.keepDirty,\n        keepSubmitSucceeded = _ref16$meta.keepSubmitSucceeded;\n    var mapData = fromJS(payload);\n    var result = empty; // clean all field state\n    // persist old warnings, they will get recalculated if the new form values are different from the old values\n\n    var warning = getIn(state, 'warning');\n\n    if (warning) {\n      result = setIn(result, 'warning', warning);\n    }\n\n    var syncWarnings = getIn(state, 'syncWarnings');\n\n    if (syncWarnings) {\n      result = setIn(result, 'syncWarnings', syncWarnings);\n    } // persist old errors, they will get recalculated if the new form values are different from the old values\n\n\n    var error = getIn(state, 'error');\n\n    if (error) {\n      result = setIn(result, 'error', error);\n    }\n\n    var syncErrors = getIn(state, 'syncErrors');\n\n    if (syncErrors) {\n      result = setIn(result, 'syncErrors', syncErrors);\n    }\n\n    var registeredFields = getIn(state, 'registeredFields');\n\n    if (registeredFields) {\n      result = setIn(result, 'registeredFields', registeredFields);\n    }\n\n    var previousValues = getIn(state, 'values');\n    var previousInitialValues = getIn(state, 'initial');\n    var newInitialValues = mapData;\n    var newValues = previousValues;\n\n    if (keepDirty && registeredFields) {\n      if (!deepEqual(newInitialValues, previousInitialValues)) {\n        //\n        // Keep the value of dirty fields while updating the value of\n        // pristine fields. This way, apps can reinitialize forms while\n        // avoiding stomping on user edits.\n        //\n        // Note 1: The initialize action replaces all initial values\n        // regardless of keepDirty.\n        //\n        // Note 2: When a field is dirty, keepDirty is enabled, and the field\n        // value is the same as the new initial value for the field, the\n        // initialize action causes the field to become pristine. That effect\n        // is what we want.\n        //\n        forEach(keys(registeredFields), function (name) {\n          var previousInitialValue = getIn(previousInitialValues, name);\n          var previousValue = getIn(previousValues, name);\n\n          if (deepEqual(previousValue, previousInitialValue)) {\n            // Overwrite the old pristine value with the new pristine value\n            var newInitialValue = getIn(newInitialValues, name); // This check prevents any 'setIn' call that would create useless\n            // nested objects, since the path to the new field value would\n            // evaluate to the same (especially for undefined values)\n\n            if (getIn(newValues, name) !== newInitialValue) {\n              newValues = setIn(newValues, name, newInitialValue);\n            }\n          }\n        });\n        forEach(keys(newInitialValues), function (name) {\n          var previousInitialValue = getIn(previousInitialValues, name);\n\n          if (typeof previousInitialValue === 'undefined') {\n            // Add new values at the root level.\n            var newInitialValue = getIn(newInitialValues, name);\n            newValues = setIn(newValues, name, newInitialValue);\n          }\n        });\n      }\n    } else {\n      newValues = newInitialValues;\n    }\n\n    if (keepSubmitSucceeded && getIn(state, 'submitSucceeded')) {\n      result = setIn(result, 'submitSucceeded', true);\n    }\n\n    result = setIn(result, 'values', newValues);\n    result = setIn(result, 'initial', newInitialValues);\n    return result;\n  }), _defineProperty(_behaviors, REGISTER_FIELD, function (state, _ref17) {\n    var _ref17$payload = _ref17.payload,\n        name = _ref17$payload.name,\n        type = _ref17$payload.type;\n    var key = 'registeredFields[\\'' + name + '\\']';\n    var field = getIn(state, key);\n\n    if (field) {\n      var count = getIn(field, 'count') + 1;\n      field = setIn(field, 'count', count);\n    } else {\n      field = fromJS({\n        name: name,\n        type: type,\n        count: 1\n      });\n    }\n\n    return setIn(state, key, field);\n  }), _defineProperty(_behaviors, RESET, function (state) {\n    var result = empty;\n    var registeredFields = getIn(state, 'registeredFields');\n\n    if (registeredFields) {\n      result = setIn(result, 'registeredFields', registeredFields);\n    }\n\n    var values = getIn(state, 'initial');\n\n    if (values) {\n      result = setIn(result, 'values', values);\n      result = setIn(result, 'initial', values);\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, SUBMIT, function (state) {\n    return setIn(state, 'triggerSubmit', true);\n  }), _defineProperty(_behaviors, START_ASYNC_VALIDATION, function (state, _ref18) {\n    var field = _ref18.meta.field;\n    return setIn(state, 'asyncValidating', field || true);\n  }), _defineProperty(_behaviors, START_SUBMIT, function (state) {\n    return setIn(state, 'submitting', true);\n  }), _defineProperty(_behaviors, STOP_ASYNC_VALIDATION, function (state, _ref19) {\n    var payload = _ref19.payload;\n    var result = state;\n    result = deleteIn(result, 'asyncValidating');\n\n    if (payload && Object.keys(payload).length) {\n      var _error = payload._error,\n          fieldErrors = _objectWithoutProperties(payload, ['_error']);\n\n      if (_error) {\n        result = setIn(result, 'error', _error);\n      }\n\n      if (Object.keys(fieldErrors).length) {\n        result = setIn(result, 'asyncErrors', fromJS(fieldErrors));\n      }\n    } else {\n      result = deleteIn(result, 'error');\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, STOP_SUBMIT, function (state, _ref20) {\n    var payload = _ref20.payload;\n    var result = state;\n    result = deleteIn(result, 'submitting');\n    result = deleteIn(result, 'submitFailed');\n    result = deleteIn(result, 'submitSucceeded');\n\n    if (payload && Object.keys(payload).length) {\n      var _error = payload._error,\n          fieldErrors = _objectWithoutProperties(payload, ['_error']);\n\n      if (_error) {\n        result = setIn(result, 'error', _error);\n      } else {\n        result = deleteIn(result, 'error');\n      }\n\n      if (Object.keys(fieldErrors).length) {\n        result = setIn(result, 'submitErrors', fromJS(fieldErrors));\n      } else {\n        result = deleteIn(result, 'submitErrors');\n      }\n\n      result = setIn(result, 'submitFailed', true);\n    } else {\n      result = setIn(result, 'submitSucceeded', true);\n      result = deleteIn(result, 'error');\n      result = deleteIn(result, 'submitErrors');\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, SET_SUBMIT_FAILED, function (state, _ref21) {\n    var fields = _ref21.meta.fields;\n    var result = state;\n    result = setIn(result, 'submitFailed', true);\n    result = deleteIn(result, 'submitSucceeded');\n    result = deleteIn(result, 'submitting');\n    fields.forEach(function (field) {\n      return result = setIn(result, 'fields.' + field + '.touched', true);\n    });\n\n    if (fields.length) {\n      result = setIn(result, 'anyTouched', true);\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, SET_SUBMIT_SUCCEEDED, function (state) {\n    var result = state;\n    result = deleteIn(result, 'submitFailed');\n    result = setIn(result, 'submitSucceeded', true);\n    return result;\n  }), _defineProperty(_behaviors, TOUCH, function (state, _ref22) {\n    var fields = _ref22.meta.fields;\n    var result = state;\n    fields.forEach(function (field) {\n      return result = setIn(result, 'fields.' + field + '.touched', true);\n    });\n    result = setIn(result, 'anyTouched', true);\n    return result;\n  }), _defineProperty(_behaviors, UNREGISTER_FIELD, function (state, _ref23) {\n    var _ref23$payload = _ref23.payload,\n        name = _ref23$payload.name,\n        destroyOnUnmount = _ref23$payload.destroyOnUnmount;\n    var result = state;\n    var key = 'registeredFields[\\'' + name + '\\']';\n    var field = getIn(result, key);\n\n    if (!field) {\n      return result;\n    }\n\n    var count = getIn(field, 'count') - 1;\n\n    if (count <= 0 && destroyOnUnmount) {\n      // Note: Cannot use deleteWithCleanUp here because of the flat nature of registeredFields\n      result = deleteIn(result, key);\n\n      if (deepEqual(getIn(result, 'registeredFields'), empty)) {\n        result = deleteIn(result, 'registeredFields');\n      }\n\n      var syncErrors = getIn(result, 'syncErrors');\n\n      if (syncErrors) {\n        syncErrors = plainDeleteInWithCleanUp(syncErrors, name);\n\n        if (plain.deepEqual(syncErrors, plain.empty)) {\n          result = deleteIn(result, 'syncErrors');\n        } else {\n          result = setIn(result, 'syncErrors', syncErrors);\n        }\n      }\n\n      var syncWarnings = getIn(result, 'syncWarnings');\n\n      if (syncWarnings) {\n        syncWarnings = plainDeleteInWithCleanUp(syncWarnings, name);\n\n        if (plain.deepEqual(syncWarnings, plain.empty)) {\n          result = deleteIn(result, 'syncWarnings');\n        } else {\n          result = setIn(result, 'syncWarnings', syncWarnings);\n        }\n      }\n\n      result = deleteInWithCleanUp(result, 'submitErrors.' + name);\n      result = deleteInWithCleanUp(result, 'asyncErrors.' + name);\n    } else {\n      field = setIn(field, 'count', count);\n      result = setIn(result, key, field);\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, UNTOUCH, function (state, _ref24) {\n    var fields = _ref24.meta.fields;\n    var result = state;\n    fields.forEach(function (field) {\n      return result = deleteIn(result, 'fields.' + field + '.touched');\n    });\n    var anyTouched = some(keys(getIn(result, 'registeredFields')), function (key) {\n      return getIn(result, 'fields.' + key + '.touched');\n    });\n    result = anyTouched ? setIn(result, 'anyTouched', true) : deleteIn(result, 'anyTouched');\n    return result;\n  }), _defineProperty(_behaviors, UPDATE_SYNC_ERRORS, function (state, _ref25) {\n    var _ref25$payload = _ref25.payload,\n        syncErrors = _ref25$payload.syncErrors,\n        error = _ref25$payload.error;\n    var result = state;\n\n    if (error) {\n      result = setIn(result, 'error', error);\n      result = setIn(result, 'syncError', true);\n    } else {\n      result = deleteIn(result, 'error');\n      result = deleteIn(result, 'syncError');\n    }\n\n    if (Object.keys(syncErrors).length) {\n      result = setIn(result, 'syncErrors', syncErrors);\n    } else {\n      result = deleteIn(result, 'syncErrors');\n    }\n\n    return result;\n  }), _defineProperty(_behaviors, UPDATE_SYNC_WARNINGS, function (state, _ref26) {\n    var _ref26$payload = _ref26.payload,\n        syncWarnings = _ref26$payload.syncWarnings,\n        warning = _ref26$payload.warning;\n    var result = state;\n\n    if (warning) {\n      result = setIn(result, 'warning', warning);\n    } else {\n      result = deleteIn(result, 'warning');\n    }\n\n    if (Object.keys(syncWarnings).length) {\n      result = setIn(result, 'syncWarnings', syncWarnings);\n    } else {\n      result = deleteIn(result, 'syncWarnings');\n    }\n\n    return result;\n  }), _behaviors);\n\n  var reducer = function reducer() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n    var action = arguments[1];\n    var behavior = behaviors[action.type];\n    return behavior ? behavior(state, action) : state;\n  };\n\n  var byForm = function byForm(reducer) {\n    return function () {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n      var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        type: 'NONE'\n      };\n      var form = action && action.meta && action.meta.form;\n\n      if (!form || !isReduxFormAction(action)) {\n        return state;\n      }\n\n      if (action.type === DESTROY && action.meta && action.meta.form) {\n        return action.meta.form.reduce(function (result, form) {\n          return deleteInWithCleanUp(result, form);\n        }, state);\n      }\n\n      var formState = getIn(state, form);\n      var result = reducer(formState, action);\n      return result === formState ? state : setIn(state, form, result);\n    };\n  };\n  /**\n   * Adds additional functionality to the reducer\n   */\n\n\n  function decorate(target) {\n    target.plugin = function (reducers) {\n      var _this = this; // use 'function' keyword to enable 'this'\n\n\n      return decorate(function () {\n        var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n        var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n          type: 'NONE'\n        };\n\n        var callPlugin = function callPlugin(processed, key) {\n          var previousState = getIn(processed, key);\n          var nextState = reducers[key](previousState, action, getIn(state, key));\n          return nextState !== previousState ? setIn(processed, key, nextState) : processed;\n        };\n\n        var processed = _this(state, action); // run through redux-form reducer\n\n\n        var form = action && action.meta && action.meta.form;\n\n        if (form) {\n          // this is an action aimed at forms, so only give it to the specified form's plugin\n          return reducers[form] ? callPlugin(processed, form) : processed;\n        } else {\n          // this is not a form-specific action, so send it to all the plugins\n          return Object.keys(reducers).reduce(callPlugin, processed);\n        }\n      });\n    };\n\n    return target;\n  }\n\n  return decorate(byForm(reducer));\n}\n\nexport default createReducer;","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/node_modules/redux-form/es/createReducer.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_objectWithoutProperties","keys","target","i","indexOf","prototype","hasOwnProperty","call","ARRAY_INSERT","ARRAY_MOVE","ARRAY_POP","ARRAY_PUSH","ARRAY_REMOVE","ARRAY_REMOVE_ALL","ARRAY_SHIFT","ARRAY_SPLICE","ARRAY_SWAP","ARRAY_UNSHIFT","AUTOFILL","BLUR","CHANGE","CLEAR_ASYNC_ERROR","CLEAR_SUBMIT","CLEAR_SUBMIT_ERRORS","DESTROY","FOCUS","INITIALIZE","prefix","REGISTER_FIELD","RESET","SET_SUBMIT_FAILED","SET_SUBMIT_SUCCEEDED","START_ASYNC_VALIDATION","START_SUBMIT","STOP_ASYNC_VALIDATION","STOP_SUBMIT","SUBMIT","TOUCH","UNREGISTER_FIELD","UNTOUCH","UPDATE_SYNC_ERRORS","UPDATE_SYNC_WARNINGS","createDeleteInWithCleanUp","plain","isReduxFormAction","action","type","length","substring","createReducer","structure","_behaviors","deepEqual","empty","forEach","getIn","setIn","deleteIn","fromJS","size","some","splice","deleteInWithCleanUp","plainDeleteInWithCleanUp","doSplice","state","field","index","removeNum","force","existing","doPlainSplice","slice","rootKeys","arraySplice","result","nonValuesValue","undefined","behaviors","_ref","_ref$meta","meta","payload","_ref2","_ref2$meta","from","to","array","path","_ref3","_ref4","_ref5","_ref5$meta","_ref6","_ref7","_ref8","_ref8$meta","_ref9","_ref9$meta","indexA","indexB","valueA","valueB","_ref10","_ref11","_ref12","_ref12$meta","touch","initial","_ref13","_ref13$meta","persistentSubmitErrors","_ref14","_ref15","previouslyActive","_ref16","_ref16$meta","keepDirty","keepSubmitSucceeded","mapData","warning","syncWarnings","error","syncErrors","registeredFields","previousValues","previousInitialValues","newInitialValues","newValues","name","previousInitialValue","previousValue","newInitialValue","_ref17","_ref17$payload","count","values","_ref18","_ref19","_error","fieldErrors","_ref20","_ref21","fields","_ref22","_ref23","_ref23$payload","destroyOnUnmount","_ref24","anyTouched","_ref25","_ref25$payload","_ref26","_ref26$payload","reducer","arguments","behavior","byForm","form","reduce","formState","decorate","plugin","reducers","_this","callPlugin","processed","previousState","nextState"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport { ARRAY_INSERT, ARRAY_MOVE, ARRAY_POP, ARRAY_PUSH, ARRAY_REMOVE, ARRAY_REMOVE_ALL, ARRAY_SHIFT, ARRAY_SPLICE, ARRAY_SWAP, ARRAY_UNSHIFT, AUTOFILL, BLUR, CHANGE, CLEAR_ASYNC_ERROR, CLEAR_SUBMIT, CLEAR_SUBMIT_ERRORS, DESTROY, FOCUS, INITIALIZE, prefix, REGISTER_FIELD, RESET, SET_SUBMIT_FAILED, SET_SUBMIT_SUCCEEDED, START_ASYNC_VALIDATION, START_SUBMIT, STOP_ASYNC_VALIDATION, STOP_SUBMIT, SUBMIT, TOUCH, UNREGISTER_FIELD, UNTOUCH, UPDATE_SYNC_ERRORS, UPDATE_SYNC_WARNINGS } from './actionTypes';\nimport createDeleteInWithCleanUp from './deleteInWithCleanUp';\nimport plain from './structure/plain';\n\n\nvar isReduxFormAction = function isReduxFormAction(action) {\n  return action && action.type && action.type.length > prefix.length && action.type.substring(0, prefix.length) === prefix;\n};\n\nfunction createReducer(structure) {\n  var _behaviors;\n\n  var deepEqual = structure.deepEqual,\n      empty = structure.empty,\n      forEach = structure.forEach,\n      getIn = structure.getIn,\n      setIn = structure.setIn,\n      deleteIn = structure.deleteIn,\n      fromJS = structure.fromJS,\n      keys = structure.keys,\n      size = structure.size,\n      some = structure.some,\n      splice = structure.splice;\n\n  var deleteInWithCleanUp = createDeleteInWithCleanUp(structure);\n  var plainDeleteInWithCleanUp = createDeleteInWithCleanUp(plain);\n  var doSplice = function doSplice(state, key, field, index, removeNum, value, force) {\n    var existing = getIn(state, key + '.' + field);\n    return existing || force ? setIn(state, key + '.' + field, splice(existing, index, removeNum, value)) : state;\n  };\n  var doPlainSplice = function doPlainSplice(state, key, field, index, removeNum, value, force) {\n    var slice = getIn(state, key);\n    var existing = plain.getIn(slice, field);\n    return existing || force ? setIn(state, key, plain.setIn(slice, field, plain.splice(existing, index, removeNum, value))) : state;\n  };\n  var rootKeys = ['values', 'fields', 'submitErrors', 'asyncErrors'];\n  var arraySplice = function arraySplice(state, field, index, removeNum, value) {\n    var result = state;\n    var nonValuesValue = value != null ? empty : undefined;\n    result = doSplice(result, 'values', field, index, removeNum, value, true);\n    result = doSplice(result, 'fields', field, index, removeNum, nonValuesValue);\n    result = doPlainSplice(result, 'syncErrors', field, index, removeNum, undefined);\n    result = doPlainSplice(result, 'syncWarnings', field, index, removeNum, undefined);\n    result = doSplice(result, 'submitErrors', field, index, removeNum, undefined);\n    result = doSplice(result, 'asyncErrors', field, index, removeNum, undefined);\n    return result;\n  };\n\n  var behaviors = (_behaviors = {}, _defineProperty(_behaviors, ARRAY_INSERT, function (state, _ref) {\n    var _ref$meta = _ref.meta,\n        field = _ref$meta.field,\n        index = _ref$meta.index,\n        payload = _ref.payload;\n\n    return arraySplice(state, field, index, 0, payload);\n  }), _defineProperty(_behaviors, ARRAY_MOVE, function (state, _ref2) {\n    var _ref2$meta = _ref2.meta,\n        field = _ref2$meta.field,\n        from = _ref2$meta.from,\n        to = _ref2$meta.to;\n\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    var result = state;\n    if (length) {\n      rootKeys.forEach(function (key) {\n        var path = key + '.' + field;\n        if (getIn(result, path)) {\n          var value = getIn(result, path + '[' + from + ']');\n          result = setIn(result, path, splice(getIn(result, path), from, 1)); // remove\n          result = setIn(result, path, splice(getIn(result, path), to, 0, value)); // insert\n        }\n      });\n    }\n    return result;\n  }), _defineProperty(_behaviors, ARRAY_POP, function (state, _ref3) {\n    var field = _ref3.meta.field;\n\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    return length ? arraySplice(state, field, length - 1, 1) : state;\n  }), _defineProperty(_behaviors, ARRAY_PUSH, function (state, _ref4) {\n    var field = _ref4.meta.field,\n        payload = _ref4.payload;\n\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    return arraySplice(state, field, length, 0, payload);\n  }), _defineProperty(_behaviors, ARRAY_REMOVE, function (state, _ref5) {\n    var _ref5$meta = _ref5.meta,\n        field = _ref5$meta.field,\n        index = _ref5$meta.index;\n\n    return arraySplice(state, field, index, 1);\n  }), _defineProperty(_behaviors, ARRAY_REMOVE_ALL, function (state, _ref6) {\n    var field = _ref6.meta.field;\n\n    var array = getIn(state, 'values.' + field);\n    var length = array ? size(array) : 0;\n    return length ? arraySplice(state, field, 0, length) : state;\n  }), _defineProperty(_behaviors, ARRAY_SHIFT, function (state, _ref7) {\n    var field = _ref7.meta.field;\n\n    return arraySplice(state, field, 0, 1);\n  }), _defineProperty(_behaviors, ARRAY_SPLICE, function (state, _ref8) {\n    var _ref8$meta = _ref8.meta,\n        field = _ref8$meta.field,\n        index = _ref8$meta.index,\n        removeNum = _ref8$meta.removeNum,\n        payload = _ref8.payload;\n\n    return arraySplice(state, field, index, removeNum, payload);\n  }), _defineProperty(_behaviors, ARRAY_SWAP, function (state, _ref9) {\n    var _ref9$meta = _ref9.meta,\n        field = _ref9$meta.field,\n        indexA = _ref9$meta.indexA,\n        indexB = _ref9$meta.indexB;\n\n    var result = state;\n    rootKeys.forEach(function (key) {\n      var valueA = getIn(result, key + '.' + field + '[' + indexA + ']');\n      var valueB = getIn(result, key + '.' + field + '[' + indexB + ']');\n      if (valueA !== undefined || valueB !== undefined) {\n        result = setIn(result, key + '.' + field + '[' + indexA + ']', valueB);\n        result = setIn(result, key + '.' + field + '[' + indexB + ']', valueA);\n      }\n    });\n    return result;\n  }), _defineProperty(_behaviors, ARRAY_UNSHIFT, function (state, _ref10) {\n    var field = _ref10.meta.field,\n        payload = _ref10.payload;\n\n    return arraySplice(state, field, 0, 0, payload);\n  }), _defineProperty(_behaviors, AUTOFILL, function (state, _ref11) {\n    var field = _ref11.meta.field,\n        payload = _ref11.payload;\n\n    var result = state;\n    result = deleteInWithCleanUp(result, 'asyncErrors.' + field);\n    result = deleteInWithCleanUp(result, 'submitErrors.' + field);\n    result = setIn(result, 'fields.' + field + '.autofilled', true);\n    result = setIn(result, 'values.' + field, payload);\n    return result;\n  }), _defineProperty(_behaviors, BLUR, function (state, _ref12) {\n    var _ref12$meta = _ref12.meta,\n        field = _ref12$meta.field,\n        touch = _ref12$meta.touch,\n        payload = _ref12.payload;\n\n    var result = state;\n    var initial = getIn(result, 'initial.' + field);\n    if (initial === undefined && payload === '') {\n      result = deleteInWithCleanUp(result, 'values.' + field);\n    } else if (payload !== undefined) {\n      result = setIn(result, 'values.' + field, payload);\n    }\n    if (field === getIn(result, 'active')) {\n      result = deleteIn(result, 'active');\n    }\n    result = deleteIn(result, 'fields.' + field + '.active');\n    if (touch) {\n      result = setIn(result, 'fields.' + field + '.touched', true);\n      result = setIn(result, 'anyTouched', true);\n    }\n    return result;\n  }), _defineProperty(_behaviors, CHANGE, function (state, _ref13) {\n    var _ref13$meta = _ref13.meta,\n        field = _ref13$meta.field,\n        touch = _ref13$meta.touch,\n        persistentSubmitErrors = _ref13$meta.persistentSubmitErrors,\n        payload = _ref13.payload;\n\n    var result = state;\n    var initial = getIn(result, 'initial.' + field);\n    if (initial === undefined && payload === '') {\n      result = deleteInWithCleanUp(result, 'values.' + field);\n    } else if (payload !== undefined) {\n      result = setIn(result, 'values.' + field, payload);\n    }\n    result = deleteInWithCleanUp(result, 'asyncErrors.' + field);\n    if (!persistentSubmitErrors) {\n      result = deleteInWithCleanUp(result, 'submitErrors.' + field);\n    }\n    result = deleteInWithCleanUp(result, 'fields.' + field + '.autofilled');\n    if (touch) {\n      result = setIn(result, 'fields.' + field + '.touched', true);\n      result = setIn(result, 'anyTouched', true);\n    }\n    return result;\n  }), _defineProperty(_behaviors, CLEAR_SUBMIT, function (state) {\n    return deleteIn(state, 'triggerSubmit');\n  }), _defineProperty(_behaviors, CLEAR_SUBMIT_ERRORS, function (state) {\n    var result = state;\n    result = deleteInWithCleanUp(result, 'submitErrors');\n    result = deleteIn(result, 'error');\n    return result;\n  }), _defineProperty(_behaviors, CLEAR_ASYNC_ERROR, function (state, _ref14) {\n    var field = _ref14.meta.field;\n\n    return deleteIn(state, 'asyncErrors.' + field);\n  }), _defineProperty(_behaviors, FOCUS, function (state, _ref15) {\n    var field = _ref15.meta.field;\n\n    var result = state;\n    var previouslyActive = getIn(state, 'active');\n    result = deleteIn(result, 'fields.' + previouslyActive + '.active');\n    result = setIn(result, 'fields.' + field + '.visited', true);\n    result = setIn(result, 'fields.' + field + '.active', true);\n    result = setIn(result, 'active', field);\n    return result;\n  }), _defineProperty(_behaviors, INITIALIZE, function (state, _ref16) {\n    var payload = _ref16.payload,\n        _ref16$meta = _ref16.meta,\n        keepDirty = _ref16$meta.keepDirty,\n        keepSubmitSucceeded = _ref16$meta.keepSubmitSucceeded;\n\n    var mapData = fromJS(payload);\n    var result = empty; // clean all field state\n\n    // persist old warnings, they will get recalculated if the new form values are different from the old values\n    var warning = getIn(state, 'warning');\n    if (warning) {\n      result = setIn(result, 'warning', warning);\n    }\n    var syncWarnings = getIn(state, 'syncWarnings');\n    if (syncWarnings) {\n      result = setIn(result, 'syncWarnings', syncWarnings);\n    }\n\n    // persist old errors, they will get recalculated if the new form values are different from the old values\n    var error = getIn(state, 'error');\n    if (error) {\n      result = setIn(result, 'error', error);\n    }\n    var syncErrors = getIn(state, 'syncErrors');\n    if (syncErrors) {\n      result = setIn(result, 'syncErrors', syncErrors);\n    }\n\n    var registeredFields = getIn(state, 'registeredFields');\n    if (registeredFields) {\n      result = setIn(result, 'registeredFields', registeredFields);\n    }\n\n    var previousValues = getIn(state, 'values');\n    var previousInitialValues = getIn(state, 'initial');\n    var newInitialValues = mapData;\n\n    var newValues = previousValues;\n\n    if (keepDirty && registeredFields) {\n      if (!deepEqual(newInitialValues, previousInitialValues)) {\n        //\n        // Keep the value of dirty fields while updating the value of\n        // pristine fields. This way, apps can reinitialize forms while\n        // avoiding stomping on user edits.\n        //\n        // Note 1: The initialize action replaces all initial values\n        // regardless of keepDirty.\n        //\n        // Note 2: When a field is dirty, keepDirty is enabled, and the field\n        // value is the same as the new initial value for the field, the\n        // initialize action causes the field to become pristine. That effect\n        // is what we want.\n        //\n        forEach(keys(registeredFields), function (name) {\n          var previousInitialValue = getIn(previousInitialValues, name);\n          var previousValue = getIn(previousValues, name);\n\n          if (deepEqual(previousValue, previousInitialValue)) {\n            // Overwrite the old pristine value with the new pristine value\n            var newInitialValue = getIn(newInitialValues, name);\n\n            // This check prevents any 'setIn' call that would create useless\n            // nested objects, since the path to the new field value would\n            // evaluate to the same (especially for undefined values)\n            if (getIn(newValues, name) !== newInitialValue) {\n              newValues = setIn(newValues, name, newInitialValue);\n            }\n          }\n        });\n\n        forEach(keys(newInitialValues), function (name) {\n          var previousInitialValue = getIn(previousInitialValues, name);\n          if (typeof previousInitialValue === 'undefined') {\n            // Add new values at the root level.\n            var newInitialValue = getIn(newInitialValues, name);\n            newValues = setIn(newValues, name, newInitialValue);\n          }\n        });\n      }\n    } else {\n      newValues = newInitialValues;\n    }\n\n    if (keepSubmitSucceeded && getIn(state, 'submitSucceeded')) {\n      result = setIn(result, 'submitSucceeded', true);\n    }\n    result = setIn(result, 'values', newValues);\n    result = setIn(result, 'initial', newInitialValues);\n    return result;\n  }), _defineProperty(_behaviors, REGISTER_FIELD, function (state, _ref17) {\n    var _ref17$payload = _ref17.payload,\n        name = _ref17$payload.name,\n        type = _ref17$payload.type;\n\n    var key = 'registeredFields[\\'' + name + '\\']';\n    var field = getIn(state, key);\n    if (field) {\n      var count = getIn(field, 'count') + 1;\n      field = setIn(field, 'count', count);\n    } else {\n      field = fromJS({ name: name, type: type, count: 1 });\n    }\n    return setIn(state, key, field);\n  }), _defineProperty(_behaviors, RESET, function (state) {\n    var result = empty;\n    var registeredFields = getIn(state, 'registeredFields');\n    if (registeredFields) {\n      result = setIn(result, 'registeredFields', registeredFields);\n    }\n    var values = getIn(state, 'initial');\n    if (values) {\n      result = setIn(result, 'values', values);\n      result = setIn(result, 'initial', values);\n    }\n    return result;\n  }), _defineProperty(_behaviors, SUBMIT, function (state) {\n    return setIn(state, 'triggerSubmit', true);\n  }), _defineProperty(_behaviors, START_ASYNC_VALIDATION, function (state, _ref18) {\n    var field = _ref18.meta.field;\n\n    return setIn(state, 'asyncValidating', field || true);\n  }), _defineProperty(_behaviors, START_SUBMIT, function (state) {\n    return setIn(state, 'submitting', true);\n  }), _defineProperty(_behaviors, STOP_ASYNC_VALIDATION, function (state, _ref19) {\n    var payload = _ref19.payload;\n\n    var result = state;\n    result = deleteIn(result, 'asyncValidating');\n    if (payload && Object.keys(payload).length) {\n      var _error = payload._error,\n          fieldErrors = _objectWithoutProperties(payload, ['_error']);\n\n      if (_error) {\n        result = setIn(result, 'error', _error);\n      }\n      if (Object.keys(fieldErrors).length) {\n        result = setIn(result, 'asyncErrors', fromJS(fieldErrors));\n      }\n    } else {\n      result = deleteIn(result, 'error');\n    }\n    return result;\n  }), _defineProperty(_behaviors, STOP_SUBMIT, function (state, _ref20) {\n    var payload = _ref20.payload;\n\n    var result = state;\n    result = deleteIn(result, 'submitting');\n    result = deleteIn(result, 'submitFailed');\n    result = deleteIn(result, 'submitSucceeded');\n    if (payload && Object.keys(payload).length) {\n      var _error = payload._error,\n          fieldErrors = _objectWithoutProperties(payload, ['_error']);\n\n      if (_error) {\n        result = setIn(result, 'error', _error);\n      } else {\n        result = deleteIn(result, 'error');\n      }\n      if (Object.keys(fieldErrors).length) {\n        result = setIn(result, 'submitErrors', fromJS(fieldErrors));\n      } else {\n        result = deleteIn(result, 'submitErrors');\n      }\n      result = setIn(result, 'submitFailed', true);\n    } else {\n      result = setIn(result, 'submitSucceeded', true);\n      result = deleteIn(result, 'error');\n      result = deleteIn(result, 'submitErrors');\n    }\n    return result;\n  }), _defineProperty(_behaviors, SET_SUBMIT_FAILED, function (state, _ref21) {\n    var fields = _ref21.meta.fields;\n\n    var result = state;\n    result = setIn(result, 'submitFailed', true);\n    result = deleteIn(result, 'submitSucceeded');\n    result = deleteIn(result, 'submitting');\n    fields.forEach(function (field) {\n      return result = setIn(result, 'fields.' + field + '.touched', true);\n    });\n    if (fields.length) {\n      result = setIn(result, 'anyTouched', true);\n    }\n    return result;\n  }), _defineProperty(_behaviors, SET_SUBMIT_SUCCEEDED, function (state) {\n    var result = state;\n    result = deleteIn(result, 'submitFailed');\n    result = setIn(result, 'submitSucceeded', true);\n    return result;\n  }), _defineProperty(_behaviors, TOUCH, function (state, _ref22) {\n    var fields = _ref22.meta.fields;\n\n    var result = state;\n    fields.forEach(function (field) {\n      return result = setIn(result, 'fields.' + field + '.touched', true);\n    });\n    result = setIn(result, 'anyTouched', true);\n    return result;\n  }), _defineProperty(_behaviors, UNREGISTER_FIELD, function (state, _ref23) {\n    var _ref23$payload = _ref23.payload,\n        name = _ref23$payload.name,\n        destroyOnUnmount = _ref23$payload.destroyOnUnmount;\n\n    var result = state;\n    var key = 'registeredFields[\\'' + name + '\\']';\n    var field = getIn(result, key);\n    if (!field) {\n      return result;\n    }\n\n    var count = getIn(field, 'count') - 1;\n    if (count <= 0 && destroyOnUnmount) {\n      // Note: Cannot use deleteWithCleanUp here because of the flat nature of registeredFields\n      result = deleteIn(result, key);\n      if (deepEqual(getIn(result, 'registeredFields'), empty)) {\n        result = deleteIn(result, 'registeredFields');\n      }\n      var syncErrors = getIn(result, 'syncErrors');\n      if (syncErrors) {\n        syncErrors = plainDeleteInWithCleanUp(syncErrors, name);\n        if (plain.deepEqual(syncErrors, plain.empty)) {\n          result = deleteIn(result, 'syncErrors');\n        } else {\n          result = setIn(result, 'syncErrors', syncErrors);\n        }\n      }\n      var syncWarnings = getIn(result, 'syncWarnings');\n      if (syncWarnings) {\n        syncWarnings = plainDeleteInWithCleanUp(syncWarnings, name);\n        if (plain.deepEqual(syncWarnings, plain.empty)) {\n          result = deleteIn(result, 'syncWarnings');\n        } else {\n          result = setIn(result, 'syncWarnings', syncWarnings);\n        }\n      }\n      result = deleteInWithCleanUp(result, 'submitErrors.' + name);\n      result = deleteInWithCleanUp(result, 'asyncErrors.' + name);\n    } else {\n      field = setIn(field, 'count', count);\n      result = setIn(result, key, field);\n    }\n    return result;\n  }), _defineProperty(_behaviors, UNTOUCH, function (state, _ref24) {\n    var fields = _ref24.meta.fields;\n\n    var result = state;\n    fields.forEach(function (field) {\n      return result = deleteIn(result, 'fields.' + field + '.touched');\n    });\n    var anyTouched = some(keys(getIn(result, 'registeredFields')), function (key) {\n      return getIn(result, 'fields.' + key + '.touched');\n    });\n    result = anyTouched ? setIn(result, 'anyTouched', true) : deleteIn(result, 'anyTouched');\n    return result;\n  }), _defineProperty(_behaviors, UPDATE_SYNC_ERRORS, function (state, _ref25) {\n    var _ref25$payload = _ref25.payload,\n        syncErrors = _ref25$payload.syncErrors,\n        error = _ref25$payload.error;\n\n    var result = state;\n    if (error) {\n      result = setIn(result, 'error', error);\n      result = setIn(result, 'syncError', true);\n    } else {\n      result = deleteIn(result, 'error');\n      result = deleteIn(result, 'syncError');\n    }\n    if (Object.keys(syncErrors).length) {\n      result = setIn(result, 'syncErrors', syncErrors);\n    } else {\n      result = deleteIn(result, 'syncErrors');\n    }\n    return result;\n  }), _defineProperty(_behaviors, UPDATE_SYNC_WARNINGS, function (state, _ref26) {\n    var _ref26$payload = _ref26.payload,\n        syncWarnings = _ref26$payload.syncWarnings,\n        warning = _ref26$payload.warning;\n\n    var result = state;\n    if (warning) {\n      result = setIn(result, 'warning', warning);\n    } else {\n      result = deleteIn(result, 'warning');\n    }\n    if (Object.keys(syncWarnings).length) {\n      result = setIn(result, 'syncWarnings', syncWarnings);\n    } else {\n      result = deleteIn(result, 'syncWarnings');\n    }\n    return result;\n  }), _behaviors);\n\n  var reducer = function reducer() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n    var action = arguments[1];\n\n    var behavior = behaviors[action.type];\n    return behavior ? behavior(state, action) : state;\n  };\n\n  var byForm = function byForm(reducer) {\n    return function () {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n      var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { type: 'NONE' };\n\n      var form = action && action.meta && action.meta.form;\n      if (!form || !isReduxFormAction(action)) {\n        return state;\n      }\n      if (action.type === DESTROY && action.meta && action.meta.form) {\n        return action.meta.form.reduce(function (result, form) {\n          return deleteInWithCleanUp(result, form);\n        }, state);\n      }\n      var formState = getIn(state, form);\n      var result = reducer(formState, action);\n      return result === formState ? state : setIn(state, form, result);\n    };\n  };\n\n  /**\n   * Adds additional functionality to the reducer\n   */\n  function decorate(target) {\n    target.plugin = function (reducers) {\n      var _this = this;\n\n      // use 'function' keyword to enable 'this'\n      return decorate(function () {\n        var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n        var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { type: 'NONE' };\n\n        var callPlugin = function callPlugin(processed, key) {\n          var previousState = getIn(processed, key);\n          var nextState = reducers[key](previousState, action, getIn(state, key));\n          return nextState !== previousState ? setIn(processed, key, nextState) : processed;\n        };\n\n        var processed = _this(state, action); // run through redux-form reducer\n        var form = action && action.meta && action.meta.form;\n\n        if (form) {\n          // this is an action aimed at forms, so only give it to the specified form's plugin\n          return reducers[form] ? callPlugin(processed, form) : processed;\n        } else {\n          // this is not a form-specific action, so send it to all the plugins\n          return Object.keys(reducers).reduce(callPlugin, processed);\n        }\n      });\n    };\n\n    return target;\n  }\n\n  return decorate(byForm(reducer));\n}\n\nexport default createReducer;"]},"metadata":{},"sourceType":"module"}