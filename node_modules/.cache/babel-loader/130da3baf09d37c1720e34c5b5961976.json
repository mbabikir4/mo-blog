{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FileInput = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _recompose = require('recompose');\n\nvar _reactDropzone = require('react-dropzone');\n\nvar _reactDropzone2 = _interopRequireDefault(_reactDropzone);\n\nvar _FileInputPreview = require('./FileInputPreview');\n\nvar _FileInputPreview2 = _interopRequireDefault(_FileInputPreview);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar defaultStyle = {\n  dropZone: {\n    background: '#efefef',\n    cursor: 'pointer',\n    padding: '1rem',\n    textAlign: 'center',\n    color: '#999'\n  },\n  preview: {\n    float: 'left'\n  }\n};\n\nvar FileInput = exports.FileInput = function (_Component) {\n  (0, _inherits3.default)(FileInput, _Component);\n\n  function FileInput(props) {\n    (0, _classCallCheck3.default)(this, FileInput);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (FileInput.__proto__ || Object.getPrototypeOf(FileInput)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    var files = props.input.value || [];\n\n    if (!Array.isArray(files)) {\n      files = [files];\n    }\n\n    _this.state = {\n      files: files.map(_this.transformFile)\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(FileInput, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var files = nextProps.input.value || [];\n\n      if (!Array.isArray(files)) {\n        files = [files];\n      }\n\n      this.setState({\n        files: files.map(this.transformFile)\n      });\n    } // turn a browser dropped file structure into expected structure\n\n  }, {\n    key: 'label',\n    value: function label() {\n      var _props = this.props,\n          translate = _props.translate,\n          placeholder = _props.placeholder,\n          labelMultiple = _props.labelMultiple,\n          labelSingle = _props.labelSingle;\n\n      if (placeholder) {\n        return placeholder;\n      }\n\n      if (this.props.multiple) {\n        return _react2.default.createElement('p', null, translate(labelMultiple));\n      }\n\n      return _react2.default.createElement('p', null, translate(labelSingle));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          accept = _props2.accept,\n          children = _props2.children,\n          disableClick = _props2.disableClick,\n          elStyle = _props2.elStyle,\n          itemStyle = _props2.itemStyle,\n          maxSize = _props2.maxSize,\n          minSize = _props2.minSize,\n          multiple = _props2.multiple,\n          style = _props2.style,\n          removeStyle = _props2.removeStyle;\n      var finalStyle = (0, _extends3.default)({}, defaultStyle, style);\n      return _react2.default.createElement('div', {\n        style: elStyle\n      }, _react2.default.createElement(_reactDropzone2.default, {\n        onDrop: this.onDrop,\n        accept: accept,\n        disableClick: disableClick,\n        maxSize: maxSize,\n        minSize: minSize,\n        multiple: multiple,\n        style: finalStyle.dropZone\n      }, this.label()), children && _react2.default.createElement('div', {\n        className: 'previews'\n      }, this.state.files.map(function (file, index) {\n        return _react2.default.createElement(_FileInputPreview2.default, {\n          key: index,\n          file: file,\n          itemStyle: itemStyle,\n          onRemove: _this2.onRemove(file),\n          removeStyle: removeStyle\n        }, _react2.default.cloneElement(children, {\n          record: file,\n          style: defaultStyle.preview\n        }));\n      })));\n    }\n  }]);\n  return FileInput;\n}(_react.Component);\n\nFileInput.propTypes = {\n  accept: _propTypes2.default.string,\n  children: _propTypes2.default.element,\n  disableClick: _propTypes2.default.bool,\n  elStyle: _propTypes2.default.object,\n  input: _propTypes2.default.object,\n  itemStyle: _propTypes2.default.object,\n  labelMultiple: _propTypes2.default.string,\n  labelSingle: _propTypes2.default.string,\n  maxSize: _propTypes2.default.number,\n  minSize: _propTypes2.default.number,\n  multiple: _propTypes2.default.bool,\n  removeStyle: _propTypes2.default.object,\n  style: _propTypes2.default.object,\n  translate: _propTypes2.default.func.isRequired,\n  placeholder: _propTypes2.default.node\n};\nFileInput.defaultProps = {\n  addLabel: true,\n  addField: true,\n  itemStyle: {},\n  labelMultiple: 'aor.input.file.upload_several',\n  labelSingle: 'aor.input.file.upload_single',\n  multiple: false,\n  onUpload: function onUpload() {},\n  removeStyle: {\n    display: 'inline-block'\n  }\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.onDrop = function (files) {\n    var updatedFiles = _this3.props.multiple ? [].concat((0, _toConsumableArray3.default)(_this3.state.files), (0, _toConsumableArray3.default)(files.map(_this3.transformFile))) : [].concat((0, _toConsumableArray3.default)(files.map(_this3.transformFile)));\n\n    _this3.setState({\n      files: updatedFiles\n    });\n\n    _this3.props.input.onChange(updatedFiles);\n  };\n\n  this.onRemove = function (file) {\n    return function () {\n      var filteredFiles = _this3.state.files.filter(function (stateFile) {\n        return !(0, _recompose.shallowEqual)(stateFile, file);\n      });\n\n      _this3.setState({\n        files: filteredFiles\n      });\n\n      _this3.props.input.onChange(filteredFiles);\n    };\n  };\n\n  this.transformFile = function (file) {\n    if (!(file instanceof File)) {\n      return file;\n    }\n\n    var _React$Children$toArr = _react2.default.Children.toArray(_this3.props.children)[0].props,\n        source = _React$Children$toArr.source,\n        title = _React$Children$toArr.title;\n\n    var transformedFile = (0, _defineProperty3.default)({\n      rawFile: file\n    }, source, file.preview);\n\n    if (title) {\n      transformedFile[title] = file.name;\n    }\n\n    return transformedFile;\n  };\n};\n\nexports.default = (0, _translate2.default)(FileInput);","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/mui/input/FileInput.js"],"names":["Object","defineProperty","exports","value","FileInput","undefined","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_toConsumableArray2","_toConsumableArray3","_extends2","_extends3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_recompose","_reactDropzone","_reactDropzone2","_FileInputPreview","_FileInputPreview2","_translate","_translate2","obj","__esModule","default","defaultStyle","dropZone","background","cursor","padding","textAlign","color","preview","float","_Component","props","_this","__proto__","getPrototypeOf","call","_initialiseProps","files","input","Array","isArray","state","map","transformFile","key","componentWillReceiveProps","nextProps","setState","label","_props","translate","placeholder","labelMultiple","labelSingle","multiple","createElement","render","_this2","_props2","accept","children","disableClick","elStyle","itemStyle","maxSize","minSize","style","removeStyle","finalStyle","onDrop","className","file","index","onRemove","cloneElement","record","Component","propTypes","string","element","bool","object","number","func","isRequired","node","defaultProps","addLabel","addField","onUpload","display","_this3","updatedFiles","concat","onChange","filteredFiles","filter","stateFile","shallowEqual","File","_React$Children$toArr","Children","toArray","source","title","transformedFile","rawFile","name"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.FileInput = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _recompose = require('recompose');\n\nvar _reactDropzone = require('react-dropzone');\n\nvar _reactDropzone2 = _interopRequireDefault(_reactDropzone);\n\nvar _FileInputPreview = require('./FileInputPreview');\n\nvar _FileInputPreview2 = _interopRequireDefault(_FileInputPreview);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultStyle = {\n    dropZone: {\n        background: '#efefef',\n        cursor: 'pointer',\n        padding: '1rem',\n        textAlign: 'center',\n        color: '#999'\n    },\n    preview: {\n        float: 'left'\n    }\n};\n\nvar FileInput = exports.FileInput = function (_Component) {\n    (0, _inherits3.default)(FileInput, _Component);\n\n    function FileInput(props) {\n        (0, _classCallCheck3.default)(this, FileInput);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (FileInput.__proto__ || Object.getPrototypeOf(FileInput)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        var files = props.input.value || [];\n        if (!Array.isArray(files)) {\n            files = [files];\n        }\n\n        _this.state = {\n            files: files.map(_this.transformFile)\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(FileInput, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            var files = nextProps.input.value || [];\n            if (!Array.isArray(files)) {\n                files = [files];\n            }\n\n            this.setState({ files: files.map(this.transformFile) });\n        }\n\n        // turn a browser dropped file structure into expected structure\n\n    }, {\n        key: 'label',\n        value: function label() {\n            var _props = this.props,\n                translate = _props.translate,\n                placeholder = _props.placeholder,\n                labelMultiple = _props.labelMultiple,\n                labelSingle = _props.labelSingle;\n\n\n            if (placeholder) {\n                return placeholder;\n            }\n\n            if (this.props.multiple) {\n                return _react2.default.createElement(\n                    'p',\n                    null,\n                    translate(labelMultiple)\n                );\n            }\n\n            return _react2.default.createElement(\n                'p',\n                null,\n                translate(labelSingle)\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props2 = this.props,\n                accept = _props2.accept,\n                children = _props2.children,\n                disableClick = _props2.disableClick,\n                elStyle = _props2.elStyle,\n                itemStyle = _props2.itemStyle,\n                maxSize = _props2.maxSize,\n                minSize = _props2.minSize,\n                multiple = _props2.multiple,\n                style = _props2.style,\n                removeStyle = _props2.removeStyle;\n\n\n            var finalStyle = (0, _extends3.default)({}, defaultStyle, style);\n\n            return _react2.default.createElement(\n                'div',\n                { style: elStyle },\n                _react2.default.createElement(\n                    _reactDropzone2.default,\n                    {\n                        onDrop: this.onDrop,\n                        accept: accept,\n                        disableClick: disableClick,\n                        maxSize: maxSize,\n                        minSize: minSize,\n                        multiple: multiple,\n                        style: finalStyle.dropZone\n                    },\n                    this.label()\n                ),\n                children && _react2.default.createElement(\n                    'div',\n                    { className: 'previews' },\n                    this.state.files.map(function (file, index) {\n                        return _react2.default.createElement(\n                            _FileInputPreview2.default,\n                            {\n                                key: index,\n                                file: file,\n                                itemStyle: itemStyle,\n                                onRemove: _this2.onRemove(file),\n                                removeStyle: removeStyle\n                            },\n                            _react2.default.cloneElement(children, {\n                                record: file,\n                                style: defaultStyle.preview\n                            })\n                        );\n                    })\n                )\n            );\n        }\n    }]);\n    return FileInput;\n}(_react.Component);\n\nFileInput.propTypes = {\n    accept: _propTypes2.default.string,\n    children: _propTypes2.default.element,\n    disableClick: _propTypes2.default.bool,\n    elStyle: _propTypes2.default.object,\n    input: _propTypes2.default.object,\n    itemStyle: _propTypes2.default.object,\n    labelMultiple: _propTypes2.default.string,\n    labelSingle: _propTypes2.default.string,\n    maxSize: _propTypes2.default.number,\n    minSize: _propTypes2.default.number,\n    multiple: _propTypes2.default.bool,\n    removeStyle: _propTypes2.default.object,\n    style: _propTypes2.default.object,\n    translate: _propTypes2.default.func.isRequired,\n    placeholder: _propTypes2.default.node\n};\nFileInput.defaultProps = {\n    addLabel: true,\n    addField: true,\n    itemStyle: {},\n    labelMultiple: 'aor.input.file.upload_several',\n    labelSingle: 'aor.input.file.upload_single',\n    multiple: false,\n    onUpload: function onUpload() {},\n    removeStyle: { display: 'inline-block' }\n};\n\nvar _initialiseProps = function _initialiseProps() {\n    var _this3 = this;\n\n    this.onDrop = function (files) {\n        var updatedFiles = _this3.props.multiple ? [].concat((0, _toConsumableArray3.default)(_this3.state.files), (0, _toConsumableArray3.default)(files.map(_this3.transformFile))) : [].concat((0, _toConsumableArray3.default)(files.map(_this3.transformFile)));\n\n        _this3.setState({ files: updatedFiles });\n        _this3.props.input.onChange(updatedFiles);\n    };\n\n    this.onRemove = function (file) {\n        return function () {\n            var filteredFiles = _this3.state.files.filter(function (stateFile) {\n                return !(0, _recompose.shallowEqual)(stateFile, file);\n            });\n\n            _this3.setState({ files: filteredFiles });\n            _this3.props.input.onChange(filteredFiles);\n        };\n    };\n\n    this.transformFile = function (file) {\n        if (!(file instanceof File)) {\n            return file;\n        }\n\n        var _React$Children$toArr = _react2.default.Children.toArray(_this3.props.children)[0].props,\n            source = _React$Children$toArr.source,\n            title = _React$Children$toArr.title;\n\n        var transformedFile = (0, _defineProperty3.default)({\n            rawFile: file\n        }, source, file.preview);\n\n        if (title) {\n            transformedFile[title] = file.name;\n        }\n\n        return transformedFile;\n    };\n};\n\nexports.default = (0, _translate2.default)(FileInput);"]},"metadata":{},"sourceType":"script"}