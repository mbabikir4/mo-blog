{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.nameRelatedTo = exports.getReferencesByIds = exports.getReferences = exports.getIds = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends3 = require('babel-runtime/helpers/extends');\n\nvar _extends4 = _interopRequireDefault(_extends3);\n\nvar _dataActions = require('../../../actions/dataActions');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar initialState = {};\n\nexports.default = function () {\n  var previousState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var _ref = arguments[1];\n  var type = _ref.type,\n      payload = _ref.payload,\n      meta = _ref.meta;\n\n  switch (type) {\n    case _dataActions.CRUD_GET_MANY_REFERENCE_SUCCESS:\n      return (0, _extends4.default)({}, previousState, (0, _defineProperty3.default)({}, meta.relatedTo, payload.data.map(function (record) {\n        return record.id;\n      })));\n\n    default:\n      return previousState;\n  }\n};\n\nvar getIds = exports.getIds = function getIds(state, relatedTo) {\n  return state.admin.references.oneToMany[relatedTo];\n};\n\nvar getReferences = exports.getReferences = function getReferences(state, reference, relatedTo) {\n  var ids = getIds(state, relatedTo);\n  if (typeof ids === 'undefined') return undefined;\n  return ids.map(function (id) {\n    return state.admin.resources[reference].data[id];\n  }).filter(function (r) {\n    return typeof r !== 'undefined';\n  }).reduce(function (prev, record) {\n    prev[record.id] = record; // eslint-disable-line no-param-reassign\n\n    return prev;\n  }, {});\n};\n\nvar getReferencesByIds = exports.getReferencesByIds = function getReferencesByIds(state, reference, ids) {\n  if (ids.length === 0) return {};\n  return ids.map(function (id) {\n    return state.admin.resources[reference].data[id];\n  }).filter(function (r) {\n    return typeof r !== 'undefined';\n  }).reduce(function (prev, record) {\n    prev[record.id] = record; // eslint-disable-line no-param-reassign\n\n    return prev;\n  }, {});\n};\n\nvar nameRelatedTo = exports.nameRelatedTo = function nameRelatedTo(reference, id, resource, target) {\n  var filter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var keys = Object.keys(filter);\n\n  if (!keys.length) {\n    return resource + '_' + reference + '@' + target + '_' + id;\n  }\n\n  return resource + '_' + reference + '@' + target + '_' + id + '?' + keys.map(function (key) {\n    return key + '=' + JSON.stringify(filter[key]);\n  }).join('&');\n};","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/reducer/admin/references/oneToMany.js"],"names":["Object","defineProperty","exports","value","nameRelatedTo","getReferencesByIds","getReferences","getIds","undefined","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_extends3","_extends4","_dataActions","obj","__esModule","default","initialState","previousState","arguments","length","_ref","type","payload","meta","CRUD_GET_MANY_REFERENCE_SUCCESS","relatedTo","data","map","record","id","state","admin","references","oneToMany","reference","ids","resources","filter","r","reduce","prev","resource","target","keys","key","JSON","stringify","join"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.nameRelatedTo = exports.getReferencesByIds = exports.getReferences = exports.getIds = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends3 = require('babel-runtime/helpers/extends');\n\nvar _extends4 = _interopRequireDefault(_extends3);\n\nvar _dataActions = require('../../../actions/dataActions');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {};\n\nexports.default = function () {\n    var previousState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var _ref = arguments[1];\n    var type = _ref.type,\n        payload = _ref.payload,\n        meta = _ref.meta;\n\n    switch (type) {\n        case _dataActions.CRUD_GET_MANY_REFERENCE_SUCCESS:\n            return (0, _extends4.default)({}, previousState, (0, _defineProperty3.default)({}, meta.relatedTo, payload.data.map(function (record) {\n                return record.id;\n            })));\n        default:\n            return previousState;\n    }\n};\n\nvar getIds = exports.getIds = function getIds(state, relatedTo) {\n    return state.admin.references.oneToMany[relatedTo];\n};\n\nvar getReferences = exports.getReferences = function getReferences(state, reference, relatedTo) {\n    var ids = getIds(state, relatedTo);\n    if (typeof ids === 'undefined') return undefined;\n    return ids.map(function (id) {\n        return state.admin.resources[reference].data[id];\n    }).filter(function (r) {\n        return typeof r !== 'undefined';\n    }).reduce(function (prev, record) {\n        prev[record.id] = record; // eslint-disable-line no-param-reassign\n        return prev;\n    }, {});\n};\n\nvar getReferencesByIds = exports.getReferencesByIds = function getReferencesByIds(state, reference, ids) {\n    if (ids.length === 0) return {};\n    return ids.map(function (id) {\n        return state.admin.resources[reference].data[id];\n    }).filter(function (r) {\n        return typeof r !== 'undefined';\n    }).reduce(function (prev, record) {\n        prev[record.id] = record; // eslint-disable-line no-param-reassign\n        return prev;\n    }, {});\n};\n\nvar nameRelatedTo = exports.nameRelatedTo = function nameRelatedTo(reference, id, resource, target) {\n    var filter = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    var keys = Object.keys(filter);\n    if (!keys.length) {\n        return resource + '_' + reference + '@' + target + '_' + id;\n    }\n\n    return resource + '_' + reference + '@' + target + '_' + id + '?' + keys.map(function (key) {\n        return key + '=' + JSON.stringify(filter[key]);\n    }).join('&');\n};"]},"metadata":{},"sourceType":"script"}