{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Edit = undefined;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _Card = require('material-ui/Card');\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _inflection = require('inflection');\n\nvar _inflection2 = _interopRequireDefault(_inflection);\n\nvar _reduxForm = require('redux-form');\n\nvar _ViewTitle = require('../layout/ViewTitle');\n\nvar _ViewTitle2 = _interopRequireDefault(_ViewTitle);\n\nvar _Title = require('../layout/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _dataActions = require('../../actions/dataActions');\n\nvar _EditActions = require('./EditActions');\n\nvar _EditActions2 = _interopRequireDefault(_EditActions);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nvar _withPermissionsFilteredChildren = require('../../auth/withPermissionsFilteredChildren');\n\nvar _withPermissionsFilteredChildren2 = _interopRequireDefault(_withPermissionsFilteredChildren);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Edit = exports.Edit = function (_Component) {\n  (0, _inherits3.default)(Edit, _Component);\n\n  function Edit() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, Edit);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = Edit.__proto__ || Object.getPrototypeOf(Edit)).call.apply(_ref, [this].concat(args))), _this), _this.save = function (record, redirect) {\n      _this.props.crudUpdate(_this.props.resource, _this.props.id, record, _this.props.data, _this.getBasePath(), redirect);\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(Edit, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.updateData();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.id !== nextProps.id || nextProps.version !== this.props.version) {\n        this.props.resetForm('record-form');\n        this.updateData(nextProps.resource, nextProps.id);\n      }\n    }\n  }, {\n    key: 'getBasePath',\n    value: function getBasePath() {\n      var location = this.props.location;\n      return location.pathname.split('/').slice(0, -1).join('/');\n    }\n  }, {\n    key: 'defaultRedirectRoute',\n    value: function defaultRedirectRoute() {\n      return 'list';\n    }\n  }, {\n    key: 'updateData',\n    value: function updateData() {\n      var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.resource;\n      var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props.id;\n      this.props.crudGetOne(resource, id, this.getBasePath());\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          _props$actions = _props.actions,\n          actions = _props$actions === undefined ? _react2.default.createElement(_EditActions2.default, null) : _props$actions,\n          children = _props.children,\n          data = _props.data,\n          hasDelete = _props.hasDelete,\n          hasShow = _props.hasShow,\n          hasList = _props.hasList,\n          id = _props.id,\n          isLoading = _props.isLoading,\n          resource = _props.resource,\n          title = _props.title,\n          translate = _props.translate,\n          version = _props.version;\n      if (!children) return null;\n      var basePath = this.getBasePath();\n      var resourceName = translate('resources.' + resource + '.name', {\n        smart_count: 1,\n        _: _inflection2.default.humanize(_inflection2.default.singularize(resource))\n      });\n      var defaultTitle = translate('aor.page.edit', {\n        name: '' + resourceName,\n        id: id,\n        data: data\n      });\n      var titleElement = data ? _react2.default.createElement(_Title2.default, {\n        title: title,\n        record: data,\n        defaultTitle: defaultTitle\n      }) : '';\n      return _react2.default.createElement('div', {\n        className: 'edit-page'\n      }, _react2.default.createElement(_Card.Card, {\n        style: {\n          opacity: isLoading ? 0.8 : 1\n        }\n      }, actions && _react2.default.cloneElement(actions, {\n        basePath: basePath,\n        data: data,\n        hasDelete: hasDelete,\n        hasShow: hasShow,\n        hasList: hasList,\n        resource: resource\n      }), _react2.default.createElement(_ViewTitle2.default, {\n        title: titleElement\n      }), data ? _react2.default.cloneElement(children, {\n        save: this.save,\n        resource: resource,\n        basePath: basePath,\n        record: data,\n        translate: translate,\n        version: version,\n        redirect: typeof children.props.redirect === 'undefined' ? this.defaultRedirectRoute() : children.props.redirect\n      }) : _react2.default.createElement(_Card.CardText, null, '\\xA0')));\n    }\n  }]);\n  return Edit;\n}(_react.Component);\n\nEdit.propTypes = {\n  actions: _propTypes2.default.element,\n  children: _propTypes2.default.node,\n  crudGetOne: _propTypes2.default.func.isRequired,\n  crudUpdate: _propTypes2.default.func.isRequired,\n  data: _propTypes2.default.object,\n  hasDelete: _propTypes2.default.bool,\n  hasShow: _propTypes2.default.bool,\n  hasList: _propTypes2.default.bool,\n  id: _propTypes2.default.string.isRequired,\n  isLoading: _propTypes2.default.bool.isRequired,\n  location: _propTypes2.default.object.isRequired,\n  match: _propTypes2.default.object.isRequired,\n  resource: _propTypes2.default.string.isRequired,\n  title: _propTypes2.default.any,\n  translate: _propTypes2.default.func,\n  version: _propTypes2.default.number.isRequired\n};\n\nfunction mapStateToProps(state, props) {\n  return {\n    id: decodeURIComponent(props.match.params.id),\n    data: state.admin.resources[props.resource] ? state.admin.resources[props.resource].data[decodeURIComponent(props.match.params.id)] : null,\n    isLoading: state.admin.loading > 0,\n    version: state.admin.ui.viewVersion\n  };\n}\n\nvar enhance = (0, _compose2.default)((0, _reactRedux.connect)(mapStateToProps, {\n  crudGetOne: _dataActions.crudGetOne,\n  crudUpdate: _dataActions.crudUpdate,\n  resetForm: _reduxForm.reset\n}), _translate2.default, _withPermissionsFilteredChildren2.default);\nexports.default = enhance(Edit);","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/mui/detail/Edit.js"],"names":["Object","defineProperty","exports","value","Edit","undefined","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_reactRedux","_Card","_compose","_compose2","_inflection","_inflection2","_reduxForm","_ViewTitle","_ViewTitle2","_Title","_Title2","_dataActions","_EditActions","_EditActions2","_translate","_translate2","_withPermissionsFilteredChildren","_withPermissionsFilteredChildren2","obj","__esModule","default","_Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","getPrototypeOf","call","apply","concat","save","record","redirect","props","crudUpdate","resource","id","data","getBasePath","key","componentDidMount","updateData","componentWillReceiveProps","nextProps","version","resetForm","location","pathname","split","slice","join","defaultRedirectRoute","crudGetOne","render","_props","_props$actions","actions","createElement","children","hasDelete","hasShow","hasList","isLoading","title","translate","basePath","resourceName","smart_count","_","humanize","singularize","defaultTitle","name","titleElement","className","Card","style","opacity","cloneElement","CardText","Component","propTypes","element","node","func","isRequired","object","bool","string","match","any","number","mapStateToProps","state","decodeURIComponent","params","admin","resources","loading","ui","viewVersion","enhance","connect","reset"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Edit = undefined;\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _Card = require('material-ui/Card');\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _inflection = require('inflection');\n\nvar _inflection2 = _interopRequireDefault(_inflection);\n\nvar _reduxForm = require('redux-form');\n\nvar _ViewTitle = require('../layout/ViewTitle');\n\nvar _ViewTitle2 = _interopRequireDefault(_ViewTitle);\n\nvar _Title = require('../layout/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _dataActions = require('../../actions/dataActions');\n\nvar _EditActions = require('./EditActions');\n\nvar _EditActions2 = _interopRequireDefault(_EditActions);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nvar _withPermissionsFilteredChildren = require('../../auth/withPermissionsFilteredChildren');\n\nvar _withPermissionsFilteredChildren2 = _interopRequireDefault(_withPermissionsFilteredChildren);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Edit = exports.Edit = function (_Component) {\n    (0, _inherits3.default)(Edit, _Component);\n\n    function Edit() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, Edit);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = Edit.__proto__ || Object.getPrototypeOf(Edit)).call.apply(_ref, [this].concat(args))), _this), _this.save = function (record, redirect) {\n            _this.props.crudUpdate(_this.props.resource, _this.props.id, record, _this.props.data, _this.getBasePath(), redirect);\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(Edit, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.updateData();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (this.props.id !== nextProps.id || nextProps.version !== this.props.version) {\n                this.props.resetForm('record-form');\n                this.updateData(nextProps.resource, nextProps.id);\n            }\n        }\n    }, {\n        key: 'getBasePath',\n        value: function getBasePath() {\n            var location = this.props.location;\n\n            return location.pathname.split('/').slice(0, -1).join('/');\n        }\n    }, {\n        key: 'defaultRedirectRoute',\n        value: function defaultRedirectRoute() {\n            return 'list';\n        }\n    }, {\n        key: 'updateData',\n        value: function updateData() {\n            var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.resource;\n            var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props.id;\n\n            this.props.crudGetOne(resource, id, this.getBasePath());\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                _props$actions = _props.actions,\n                actions = _props$actions === undefined ? _react2.default.createElement(_EditActions2.default, null) : _props$actions,\n                children = _props.children,\n                data = _props.data,\n                hasDelete = _props.hasDelete,\n                hasShow = _props.hasShow,\n                hasList = _props.hasList,\n                id = _props.id,\n                isLoading = _props.isLoading,\n                resource = _props.resource,\n                title = _props.title,\n                translate = _props.translate,\n                version = _props.version;\n\n\n            if (!children) return null;\n\n            var basePath = this.getBasePath();\n\n            var resourceName = translate('resources.' + resource + '.name', {\n                smart_count: 1,\n                _: _inflection2.default.humanize(_inflection2.default.singularize(resource))\n            });\n            var defaultTitle = translate('aor.page.edit', {\n                name: '' + resourceName,\n                id: id,\n                data: data\n            });\n            var titleElement = data ? _react2.default.createElement(_Title2.default, { title: title, record: data, defaultTitle: defaultTitle }) : '';\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'edit-page' },\n                _react2.default.createElement(\n                    _Card.Card,\n                    { style: { opacity: isLoading ? 0.8 : 1 } },\n                    actions && _react2.default.cloneElement(actions, {\n                        basePath: basePath,\n                        data: data,\n                        hasDelete: hasDelete,\n                        hasShow: hasShow,\n                        hasList: hasList,\n                        resource: resource\n                    }),\n                    _react2.default.createElement(_ViewTitle2.default, { title: titleElement }),\n                    data ? _react2.default.cloneElement(children, {\n                        save: this.save,\n                        resource: resource,\n                        basePath: basePath,\n                        record: data,\n                        translate: translate,\n                        version: version,\n                        redirect: typeof children.props.redirect === 'undefined' ? this.defaultRedirectRoute() : children.props.redirect\n                    }) : _react2.default.createElement(\n                        _Card.CardText,\n                        null,\n                        '\\xA0'\n                    )\n                )\n            );\n        }\n    }]);\n    return Edit;\n}(_react.Component);\n\nEdit.propTypes = {\n    actions: _propTypes2.default.element,\n    children: _propTypes2.default.node,\n    crudGetOne: _propTypes2.default.func.isRequired,\n    crudUpdate: _propTypes2.default.func.isRequired,\n    data: _propTypes2.default.object,\n    hasDelete: _propTypes2.default.bool,\n    hasShow: _propTypes2.default.bool,\n    hasList: _propTypes2.default.bool,\n    id: _propTypes2.default.string.isRequired,\n    isLoading: _propTypes2.default.bool.isRequired,\n    location: _propTypes2.default.object.isRequired,\n    match: _propTypes2.default.object.isRequired,\n    resource: _propTypes2.default.string.isRequired,\n    title: _propTypes2.default.any,\n    translate: _propTypes2.default.func,\n    version: _propTypes2.default.number.isRequired\n};\n\nfunction mapStateToProps(state, props) {\n    return {\n        id: decodeURIComponent(props.match.params.id),\n        data: state.admin.resources[props.resource] ? state.admin.resources[props.resource].data[decodeURIComponent(props.match.params.id)] : null,\n        isLoading: state.admin.loading > 0,\n        version: state.admin.ui.viewVersion\n    };\n}\n\nvar enhance = (0, _compose2.default)((0, _reactRedux.connect)(mapStateToProps, {\n    crudGetOne: _dataActions.crudGetOne,\n    crudUpdate: _dataActions.crudUpdate,\n    resetForm: _reduxForm.reset\n}), _translate2.default, _withPermissionsFilteredChildren2.default);\n\nexports.default = enhance(Edit);"]},"metadata":{},"sourceType":"script"}