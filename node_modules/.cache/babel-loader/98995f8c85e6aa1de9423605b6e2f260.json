{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findTabsWithErrors = exports.TabbedForm = undefined;\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reduxForm = require('redux-form');\n\nvar _reactRedux = require('react-redux');\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _Tabs = require('material-ui/Tabs');\n\nvar _muiThemeable = require('material-ui/styles/muiThemeable');\n\nvar _muiThemeable2 = _interopRequireDefault(_muiThemeable);\n\nvar _Toolbar = require('./Toolbar');\n\nvar _Toolbar2 = _interopRequireDefault(_Toolbar);\n\nvar _getDefaultValues = require('./getDefaultValues');\n\nvar _getDefaultValues2 = _interopRequireDefault(_getDefaultValues);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar getStyles = function getStyles(theme) {\n  return {\n    form: {\n      padding: '0 1em 3em 1em'\n    },\n    // TODO: The color will be taken from another property in MUI 0.19 and later\n    errorTabButton: {\n      color: theme.textField.errorColor\n    }\n  };\n};\n\nvar TabbedForm = exports.TabbedForm = function (_Component) {\n  (0, _inherits3.default)(TabbedForm, _Component);\n\n  function TabbedForm(props) {\n    (0, _classCallCheck3.default)(this, TabbedForm);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TabbedForm.__proto__ || Object.getPrototypeOf(TabbedForm)).call(this, props));\n\n    _this.handleChange = function (value) {\n      _this.setState({\n        value: value\n      });\n    };\n\n    _this.handleSubmitWithRedirect = function () {\n      var redirect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props.redirect;\n      return _this.props.handleSubmit(function (values) {\n        return _this.props.save(values, redirect);\n      });\n    };\n\n    _this.state = {\n      value: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(TabbedForm, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          basePath = _props.basePath,\n          children = _props.children,\n          contentContainerStyle = _props.contentContainerStyle,\n          invalid = _props.invalid,\n          muiTheme = _props.muiTheme,\n          record = _props.record,\n          resource = _props.resource,\n          submitOnEnter = _props.submitOnEnter,\n          tabsWithErrors = _props.tabsWithErrors,\n          toolbar = _props.toolbar,\n          translate = _props.translate,\n          version = _props.version;\n      var styles = getStyles(muiTheme);\n      return _react2.default.createElement('form', {\n        className: 'tabbed-form'\n      }, _react2.default.createElement('div', {\n        style: styles.form,\n        key: version\n      }, _react2.default.createElement(_Tabs.Tabs, {\n        value: this.state.value,\n        onChange: this.handleChange,\n        contentContainerStyle: contentContainerStyle\n      }, _react2.default.Children.map(children, function (tab, index) {\n        return tab ? _react2.default.createElement(_Tabs.Tab, {\n          key: tab.props.label,\n          className: 'form-tab',\n          label: translate(tab.props.label, {\n            _: tab.props.label\n          }),\n          value: index,\n          icon: tab.props.icon,\n          buttonStyle: tabsWithErrors.includes(tab.props.label) && _this2.state.value !== index ? styles.errorTabButton : null\n        }, _react2.default.cloneElement(tab, {\n          resource: resource,\n          record: record,\n          basePath: basePath\n        })) : null;\n      }))), toolbar && _react2.default.cloneElement(toolbar, {\n        handleSubmitWithRedirect: this.handleSubmitWithRedirect,\n        invalid: invalid,\n        submitOnEnter: submitOnEnter\n      }));\n    }\n  }]);\n  return TabbedForm;\n}(_react.Component);\n\nTabbedForm.propTypes = {\n  basePath: _propTypes2.default.string,\n  children: _propTypes2.default.node,\n  contentContainerStyle: _propTypes2.default.object,\n  defaultValue: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.func]),\n  handleSubmit: _propTypes2.default.func,\n  // passed by redux-form\n  invalid: _propTypes2.default.bool,\n  muiTheme: _propTypes2.default.object.isRequired,\n  record: _propTypes2.default.object,\n  redirect: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.bool]),\n  resource: _propTypes2.default.string,\n  save: _propTypes2.default.func,\n  // the handler defined in the parent, which triggers the REST submission\n  submitOnEnter: _propTypes2.default.bool,\n  tabsWithErrors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n  toolbar: _propTypes2.default.element,\n  translate: _propTypes2.default.func,\n  validate: _propTypes2.default.func,\n  version: _propTypes2.default.number\n};\nTabbedForm.defaultProps = {\n  contentContainerStyle: {\n    borderTop: 'solid 1px #e0e0e0'\n  },\n  submitOnEnter: true,\n  toolbar: _react2.default.createElement(_Toolbar2.default, null)\n};\n\nvar collectErrors = function collectErrors(state) {\n  var syncErrors = (0, _reduxForm.getFormSyncErrors)('record-form')(state);\n  var asyncErrors = (0, _reduxForm.getFormAsyncErrors)('record-form')(state);\n  var submitErrors = (0, _reduxForm.getFormSubmitErrors)('record-form')(state);\n  return (0, _extends3.default)({}, syncErrors, asyncErrors, submitErrors);\n};\n\nvar findTabsWithErrors = exports.findTabsWithErrors = function findTabsWithErrors(state, props) {\n  var collectErrorsImpl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : collectErrors;\n  var errors = collectErrorsImpl(state);\n  return _react.Children.toArray(props.children).reduce(function (acc, child) {\n    var inputs = _react.Children.toArray(child.props.children);\n\n    if (inputs.some(function (input) {\n      return errors[input.props.source];\n    })) {\n      return [].concat((0, _toConsumableArray3.default)(acc), [child.props.label]);\n    }\n\n    return acc;\n  }, []);\n};\n\nvar enhance = (0, _compose2.default)((0, _reactRedux.connect)(function (state, props) {\n  var children = _react.Children.toArray(props.children).reduce(function (acc, child) {\n    return [].concat((0, _toConsumableArray3.default)(acc), (0, _toConsumableArray3.default)(_react.Children.toArray(child.props.children)));\n  }, []);\n\n  return {\n    tabsWithErrors: findTabsWithErrors(state, props),\n    initialValues: (0, _getDefaultValues2.default)(state, (0, _extends3.default)({}, props, {\n      children: children\n    }))\n  };\n}), (0, _reduxForm.reduxForm)({\n  form: 'record-form',\n  enableReinitialize: true\n}), (0, _muiThemeable2.default)());\nexports.default = enhance(TabbedForm);","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/mui/form/TabbedForm.js"],"names":["Object","defineProperty","exports","value","findTabsWithErrors","TabbedForm","undefined","_toConsumableArray2","require","_toConsumableArray3","_interopRequireDefault","_extends2","_extends3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_reduxForm","_reactRedux","_compose","_compose2","_Tabs","_muiThemeable","_muiThemeable2","_Toolbar","_Toolbar2","_getDefaultValues","_getDefaultValues2","obj","__esModule","default","getStyles","theme","form","padding","errorTabButton","color","textField","errorColor","_Component","props","_this","__proto__","getPrototypeOf","call","handleChange","setState","handleSubmitWithRedirect","redirect","arguments","length","handleSubmit","values","save","state","key","render","_this2","_props","basePath","children","contentContainerStyle","invalid","muiTheme","record","resource","submitOnEnter","tabsWithErrors","toolbar","translate","version","styles","createElement","className","style","Tabs","onChange","Children","map","tab","index","Tab","label","_","icon","buttonStyle","includes","cloneElement","Component","propTypes","string","node","object","defaultValue","oneOfType","func","bool","isRequired","arrayOf","element","validate","number","defaultProps","borderTop","collectErrors","syncErrors","getFormSyncErrors","asyncErrors","getFormAsyncErrors","submitErrors","getFormSubmitErrors","collectErrorsImpl","errors","toArray","reduce","acc","child","inputs","some","input","source","concat","enhance","connect","initialValues","reduxForm","enableReinitialize"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.findTabsWithErrors = exports.TabbedForm = undefined;\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reduxForm = require('redux-form');\n\nvar _reactRedux = require('react-redux');\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _Tabs = require('material-ui/Tabs');\n\nvar _muiThemeable = require('material-ui/styles/muiThemeable');\n\nvar _muiThemeable2 = _interopRequireDefault(_muiThemeable);\n\nvar _Toolbar = require('./Toolbar');\n\nvar _Toolbar2 = _interopRequireDefault(_Toolbar);\n\nvar _getDefaultValues = require('./getDefaultValues');\n\nvar _getDefaultValues2 = _interopRequireDefault(_getDefaultValues);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getStyles = function getStyles(theme) {\n    return {\n        form: { padding: '0 1em 3em 1em' },\n        // TODO: The color will be taken from another property in MUI 0.19 and later\n        errorTabButton: { color: theme.textField.errorColor }\n    };\n};\n\nvar TabbedForm = exports.TabbedForm = function (_Component) {\n    (0, _inherits3.default)(TabbedForm, _Component);\n\n    function TabbedForm(props) {\n        (0, _classCallCheck3.default)(this, TabbedForm);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TabbedForm.__proto__ || Object.getPrototypeOf(TabbedForm)).call(this, props));\n\n        _this.handleChange = function (value) {\n            _this.setState({ value: value });\n        };\n\n        _this.handleSubmitWithRedirect = function () {\n            var redirect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props.redirect;\n            return _this.props.handleSubmit(function (values) {\n                return _this.props.save(values, redirect);\n            });\n        };\n\n        _this.state = {\n            value: 0\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(TabbedForm, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                basePath = _props.basePath,\n                children = _props.children,\n                contentContainerStyle = _props.contentContainerStyle,\n                invalid = _props.invalid,\n                muiTheme = _props.muiTheme,\n                record = _props.record,\n                resource = _props.resource,\n                submitOnEnter = _props.submitOnEnter,\n                tabsWithErrors = _props.tabsWithErrors,\n                toolbar = _props.toolbar,\n                translate = _props.translate,\n                version = _props.version;\n\n\n            var styles = getStyles(muiTheme);\n\n            return _react2.default.createElement(\n                'form',\n                { className: 'tabbed-form' },\n                _react2.default.createElement(\n                    'div',\n                    { style: styles.form, key: version },\n                    _react2.default.createElement(\n                        _Tabs.Tabs,\n                        {\n                            value: this.state.value,\n                            onChange: this.handleChange,\n                            contentContainerStyle: contentContainerStyle\n                        },\n                        _react2.default.Children.map(children, function (tab, index) {\n                            return tab ? _react2.default.createElement(\n                                _Tabs.Tab,\n                                {\n                                    key: tab.props.label,\n                                    className: 'form-tab',\n                                    label: translate(tab.props.label, {\n                                        _: tab.props.label\n                                    }),\n                                    value: index,\n                                    icon: tab.props.icon,\n                                    buttonStyle: tabsWithErrors.includes(tab.props.label) && _this2.state.value !== index ? styles.errorTabButton : null\n                                },\n                                _react2.default.cloneElement(tab, {\n                                    resource: resource,\n                                    record: record,\n                                    basePath: basePath\n                                })\n                            ) : null;\n                        })\n                    )\n                ),\n                toolbar && _react2.default.cloneElement(toolbar, {\n                    handleSubmitWithRedirect: this.handleSubmitWithRedirect,\n                    invalid: invalid,\n                    submitOnEnter: submitOnEnter\n                })\n            );\n        }\n    }]);\n    return TabbedForm;\n}(_react.Component);\n\nTabbedForm.propTypes = {\n    basePath: _propTypes2.default.string,\n    children: _propTypes2.default.node,\n    contentContainerStyle: _propTypes2.default.object,\n    defaultValue: _propTypes2.default.oneOfType([_propTypes2.default.object, _propTypes2.default.func]),\n    handleSubmit: _propTypes2.default.func, // passed by redux-form\n    invalid: _propTypes2.default.bool,\n    muiTheme: _propTypes2.default.object.isRequired,\n    record: _propTypes2.default.object,\n    redirect: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.bool]),\n    resource: _propTypes2.default.string,\n    save: _propTypes2.default.func, // the handler defined in the parent, which triggers the REST submission\n    submitOnEnter: _propTypes2.default.bool,\n    tabsWithErrors: _propTypes2.default.arrayOf(_propTypes2.default.string),\n    toolbar: _propTypes2.default.element,\n    translate: _propTypes2.default.func,\n    validate: _propTypes2.default.func,\n    version: _propTypes2.default.number\n};\n\nTabbedForm.defaultProps = {\n    contentContainerStyle: { borderTop: 'solid 1px #e0e0e0' },\n    submitOnEnter: true,\n    toolbar: _react2.default.createElement(_Toolbar2.default, null)\n};\n\nvar collectErrors = function collectErrors(state) {\n    var syncErrors = (0, _reduxForm.getFormSyncErrors)('record-form')(state);\n    var asyncErrors = (0, _reduxForm.getFormAsyncErrors)('record-form')(state);\n    var submitErrors = (0, _reduxForm.getFormSubmitErrors)('record-form')(state);\n\n    return (0, _extends3.default)({}, syncErrors, asyncErrors, submitErrors);\n};\n\nvar findTabsWithErrors = exports.findTabsWithErrors = function findTabsWithErrors(state, props) {\n    var collectErrorsImpl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : collectErrors;\n\n    var errors = collectErrorsImpl(state);\n\n    return _react.Children.toArray(props.children).reduce(function (acc, child) {\n        var inputs = _react.Children.toArray(child.props.children);\n\n        if (inputs.some(function (input) {\n            return errors[input.props.source];\n        })) {\n            return [].concat((0, _toConsumableArray3.default)(acc), [child.props.label]);\n        }\n\n        return acc;\n    }, []);\n};\n\nvar enhance = (0, _compose2.default)((0, _reactRedux.connect)(function (state, props) {\n    var children = _react.Children.toArray(props.children).reduce(function (acc, child) {\n        return [].concat((0, _toConsumableArray3.default)(acc), (0, _toConsumableArray3.default)(_react.Children.toArray(child.props.children)));\n    }, []);\n\n    return {\n        tabsWithErrors: findTabsWithErrors(state, props),\n        initialValues: (0, _getDefaultValues2.default)(state, (0, _extends3.default)({}, props, { children: children }))\n    };\n}), (0, _reduxForm.reduxForm)({\n    form: 'record-form',\n    enableReinitialize: true\n}), (0, _muiThemeable2.default)());\n\nexports.default = enhance(TabbedForm);"]},"metadata":{},"sourceType":"script"}