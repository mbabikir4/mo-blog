{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPossibleReferences = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends4 = require('babel-runtime/helpers/extends');\n\nvar _extends5 = _interopRequireDefault(_extends4);\n\nvar _dataActions = require('../../../actions/dataActions');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar initialState = {};\n\nexports.default = function () {\n  var previousState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var _ref = arguments[1];\n  var type = _ref.type,\n      payload = _ref.payload,\n      meta = _ref.meta;\n\n  switch (type) {\n    case _dataActions.CRUD_GET_MATCHING_SUCCESS:\n      return (0, _extends5.default)({}, previousState, (0, _defineProperty3.default)({}, meta.relatedTo, payload.data.map(function (record) {\n        return record.id;\n      })));\n\n    case _dataActions.CRUD_GET_MATCHING_FAILURE:\n      return (0, _extends5.default)({}, previousState, (0, _defineProperty3.default)({}, meta.relatedTo, {\n        error: payload.error\n      }));\n\n    default:\n      return previousState;\n  }\n};\n\nvar getPossibleReferences = exports.getPossibleReferences = function getPossibleReferences(state, referenceSource, reference) {\n  var selectedIds = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  if (!state.admin.references.possibleValues[referenceSource]) {\n    return null;\n  }\n\n  if (state.admin.references.possibleValues[referenceSource].error) {\n    return state.admin.references.possibleValues[referenceSource];\n  }\n\n  var possibleValues = Array.from(state.admin.references.possibleValues[referenceSource]);\n  selectedIds.forEach(function (id) {\n    return possibleValues.some(function (value) {\n      return value == id;\n    }) || possibleValues.unshift(id);\n  });\n  return possibleValues.map(function (id) {\n    return state.admin.resources[reference].data[id];\n  }).filter(function (r) {\n    return typeof r !== 'undefined';\n  });\n};","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/reducer/admin/references/possibleValues.js"],"names":["Object","defineProperty","exports","value","getPossibleReferences","undefined","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_extends4","_extends5","_dataActions","obj","__esModule","default","initialState","previousState","arguments","length","_ref","type","payload","meta","CRUD_GET_MATCHING_SUCCESS","relatedTo","data","map","record","id","CRUD_GET_MATCHING_FAILURE","error","state","referenceSource","reference","selectedIds","admin","references","possibleValues","Array","from","forEach","some","unshift","resources","filter","r"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getPossibleReferences = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends4 = require('babel-runtime/helpers/extends');\n\nvar _extends5 = _interopRequireDefault(_extends4);\n\nvar _dataActions = require('../../../actions/dataActions');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {};\n\nexports.default = function () {\n    var previousState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var _ref = arguments[1];\n    var type = _ref.type,\n        payload = _ref.payload,\n        meta = _ref.meta;\n\n    switch (type) {\n        case _dataActions.CRUD_GET_MATCHING_SUCCESS:\n            return (0, _extends5.default)({}, previousState, (0, _defineProperty3.default)({}, meta.relatedTo, payload.data.map(function (record) {\n                return record.id;\n            })));\n        case _dataActions.CRUD_GET_MATCHING_FAILURE:\n            return (0, _extends5.default)({}, previousState, (0, _defineProperty3.default)({}, meta.relatedTo, { error: payload.error }));\n        default:\n            return previousState;\n    }\n};\n\nvar getPossibleReferences = exports.getPossibleReferences = function getPossibleReferences(state, referenceSource, reference) {\n    var selectedIds = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n    if (!state.admin.references.possibleValues[referenceSource]) {\n        return null;\n    }\n\n    if (state.admin.references.possibleValues[referenceSource].error) {\n        return state.admin.references.possibleValues[referenceSource];\n    }\n\n    var possibleValues = Array.from(state.admin.references.possibleValues[referenceSource]);\n\n    selectedIds.forEach(function (id) {\n        return possibleValues.some(function (value) {\n            return value == id;\n        }) || possibleValues.unshift(id);\n    });\n    return possibleValues.map(function (id) {\n        return state.admin.resources[reference].data[id];\n    }).filter(function (r) {\n        return typeof r !== 'undefined';\n    });\n};"]},"metadata":{},"sourceType":"script"}