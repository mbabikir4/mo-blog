{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AdminRoutes = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRouterDom = require('react-router-dom');\n\nvar _reactRedux = require('react-redux');\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _getContext = require('recompose/getContext');\n\nvar _getContext2 = _interopRequireDefault(_getContext);\n\nvar _CrudRoute = require('./CrudRoute');\n\nvar _CrudRoute2 = _interopRequireDefault(_CrudRoute);\n\nvar _NotFound = require('./mui/layout/NotFound');\n\nvar _NotFound2 = _interopRequireDefault(_NotFound);\n\nvar _Restricted = require('./auth/Restricted');\n\nvar _Restricted2 = _interopRequireDefault(_Restricted);\n\nvar _auth = require('./auth');\n\nvar _actions = require('./actions');\n\nvar _getMissingAuthClientError = require('./util/getMissingAuthClientError');\n\nvar _getMissingAuthClientError2 = _interopRequireDefault(_getMissingAuthClientError);\n\nvar _Layout = require('./mui/layout/Layout');\n\nvar _Layout2 = _interopRequireDefault(_Layout);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar AdminRoutes = exports.AdminRoutes = function (_Component) {\n  (0, _inherits3.default)(AdminRoutes, _Component);\n\n  function AdminRoutes() {\n    (0, _classCallCheck3.default)(this, AdminRoutes);\n    return (0, _possibleConstructorReturn3.default)(this, (AdminRoutes.__proto__ || Object.getPrototypeOf(AdminRoutes)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(AdminRoutes, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.initializeResources(this.props.children);\n    }\n  }, {\n    key: 'initializeResources',\n    value: function initializeResources(children) {\n      var _this2 = this;\n\n      if (typeof children === 'function') {\n        if (!this.props.authClient) {\n          throw new Error((0, _getMissingAuthClientError2.default)('Admin'));\n        }\n\n        this.props.authClient(_auth.AUTH_GET_PERMISSIONS).then(function (permissions) {\n          var resources = children(permissions).filter(function (node) {\n            return node;\n          }).map(function (node) {\n            return node.props;\n          });\n\n          _this2.props.declareResources(resources);\n        });\n      } else {\n        var resources = _react2.default.Children.map(children, function (child) {\n          return child ? child.props : false;\n        }) || [];\n        this.props.declareResources(resources.filter(function (r) {\n          return r;\n        }));\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          appLayout = _props.appLayout,\n          catchAll = _props.catchAll,\n          customRoutes = _props.customRoutes,\n          dashboard = _props.dashboard,\n          logout = _props.logout,\n          menu = _props.menu,\n          _props$resources = _props.resources,\n          resources = _props$resources === undefined ? [] : _props$resources,\n          title = _props.title,\n          theme = _props.theme;\n      return _react2.default.createElement(_reactRouterDom.Switch, null, customRoutes.filter(function (route) {\n        return route.props.noLayout;\n      }).map(function (route, index) {\n        return _react2.default.createElement(_reactRouterDom.Route, {\n          key: index,\n          exact: route.props.exact,\n          path: route.props.path,\n          render: function render(_ref) {\n            var location = _ref.location;\n\n            if (route.props.render) {\n              return route.props.render({\n                location: location,\n                title: title,\n                theme: theme\n              });\n            }\n\n            if (route.props.component) {\n              return (0, _react.createElement)(route.props.component, {\n                location: location,\n                title: title,\n                theme: theme\n              });\n            }\n          }\n        });\n      }), _react2.default.createElement(_reactRouterDom.Route, {\n        path: '/',\n        render: function render() {\n          return (0, _react.createElement)(appLayout, {\n            children: _react2.default.createElement(_reactRouterDom.Switch, null, customRoutes && customRoutes.map(function (route, index) {\n              return _react2.default.createElement(_reactRouterDom.Route, {\n                key: index,\n                exact: route.props.exact,\n                path: route.props.path,\n                component: route.props.component,\n                render: route.props.render,\n                children: route.props.children // eslint-disable-line react/no-children-prop\n\n              });\n            }), resources.map(function (resource) {\n              return _react2.default.createElement(_reactRouterDom.Route, {\n                path: '/' + resource.name,\n                key: resource.name,\n                render: function render() {\n                  return _react2.default.createElement(_CrudRoute2.default, {\n                    resource: resource.name,\n                    list: resource.list,\n                    create: resource.create,\n                    edit: resource.edit,\n                    show: resource.show,\n                    remove: resource.remove,\n                    options: resource.options\n                  });\n                }\n              });\n            }), dashboard ? _react2.default.createElement(_reactRouterDom.Route, {\n              exact: true,\n              path: '/',\n              render: function render(routeProps) {\n                return _react2.default.createElement(_Restricted2.default, (0, _extends3.default)({\n                  authParams: {\n                    route: 'dashboard'\n                  }\n                }, routeProps), _react2.default.createElement(dashboard));\n              }\n            }) : resources[0] && _react2.default.createElement(_reactRouterDom.Route, {\n              exact: true,\n              path: '/',\n              render: function render() {\n                return _react2.default.createElement(_reactRouterDom.Redirect, {\n                  to: '/' + resources[0].name\n                });\n              }\n            }), _react2.default.createElement(_reactRouterDom.Route, {\n              component: catchAll || _NotFound2.default\n            })),\n            dashboard: dashboard,\n            customRoutes: customRoutes.filter(function (route) {\n              return !route.props.noLayout;\n            }),\n            logout: logout,\n            menu: menu,\n            catchAll: catchAll,\n            title: title,\n            theme: theme\n          });\n        }\n      }));\n    }\n  }]);\n  return AdminRoutes;\n}(_react.Component);\n\nvar componentPropType = _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]);\n\nAdminRoutes.propTypes = {\n  appLayout: componentPropType,\n  authClient: _propTypes2.default.func,\n  children: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.node]),\n  catchAll: componentPropType,\n  customRoutes: _propTypes2.default.array,\n  dashboard: componentPropType,\n  declareResources: _propTypes2.default.func.isRequired,\n  logout: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func, _propTypes2.default.string]),\n  menu: componentPropType,\n  resources: _propTypes2.default.array,\n  theme: _propTypes2.default.object,\n  title: _propTypes2.default.node\n};\nAdminRoutes.defaultProps = {\n  appLayout: _Layout2.default\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    resources: Object.keys(state.admin.resources).map(function (key) {\n      return state.admin.resources[key].props;\n    })\n  };\n};\n\nexports.default = (0, _compose2.default)((0, _getContext2.default)({\n  authClient: _propTypes2.default.func\n}), (0, _reactRedux.connect)(mapStateToProps, {\n  declareResources: _actions.declareResources\n}))(AdminRoutes);","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/AdminRoutes.js"],"names":["Object","defineProperty","exports","value","AdminRoutes","undefined","_extends2","require","_extends3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_reactRouterDom","_reactRedux","_compose","_compose2","_getContext","_getContext2","_CrudRoute","_CrudRoute2","_NotFound","_NotFound2","_Restricted","_Restricted2","_auth","_actions","_getMissingAuthClientError","_getMissingAuthClientError2","_Layout","_Layout2","obj","__esModule","default","_Component","__proto__","getPrototypeOf","apply","arguments","key","componentDidMount","initializeResources","props","children","_this2","authClient","Error","AUTH_GET_PERMISSIONS","then","permissions","resources","filter","node","map","declareResources","Children","child","r","render","_props","appLayout","catchAll","customRoutes","dashboard","logout","menu","_props$resources","title","theme","createElement","Switch","route","noLayout","index","Route","exact","path","_ref","location","component","resource","name","list","create","edit","show","remove","options","routeProps","authParams","Redirect","to","Component","componentPropType","oneOfType","func","string","propTypes","array","isRequired","object","defaultProps","mapStateToProps","state","keys","admin","connect"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.AdminRoutes = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRouterDom = require('react-router-dom');\n\nvar _reactRedux = require('react-redux');\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _getContext = require('recompose/getContext');\n\nvar _getContext2 = _interopRequireDefault(_getContext);\n\nvar _CrudRoute = require('./CrudRoute');\n\nvar _CrudRoute2 = _interopRequireDefault(_CrudRoute);\n\nvar _NotFound = require('./mui/layout/NotFound');\n\nvar _NotFound2 = _interopRequireDefault(_NotFound);\n\nvar _Restricted = require('./auth/Restricted');\n\nvar _Restricted2 = _interopRequireDefault(_Restricted);\n\nvar _auth = require('./auth');\n\nvar _actions = require('./actions');\n\nvar _getMissingAuthClientError = require('./util/getMissingAuthClientError');\n\nvar _getMissingAuthClientError2 = _interopRequireDefault(_getMissingAuthClientError);\n\nvar _Layout = require('./mui/layout/Layout');\n\nvar _Layout2 = _interopRequireDefault(_Layout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AdminRoutes = exports.AdminRoutes = function (_Component) {\n    (0, _inherits3.default)(AdminRoutes, _Component);\n\n    function AdminRoutes() {\n        (0, _classCallCheck3.default)(this, AdminRoutes);\n        return (0, _possibleConstructorReturn3.default)(this, (AdminRoutes.__proto__ || Object.getPrototypeOf(AdminRoutes)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(AdminRoutes, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initializeResources(this.props.children);\n        }\n    }, {\n        key: 'initializeResources',\n        value: function initializeResources(children) {\n            var _this2 = this;\n\n            if (typeof children === 'function') {\n                if (!this.props.authClient) {\n                    throw new Error((0, _getMissingAuthClientError2.default)('Admin'));\n                }\n\n                this.props.authClient(_auth.AUTH_GET_PERMISSIONS).then(function (permissions) {\n                    var resources = children(permissions).filter(function (node) {\n                        return node;\n                    }).map(function (node) {\n                        return node.props;\n                    });\n                    _this2.props.declareResources(resources);\n                });\n            } else {\n                var resources = _react2.default.Children.map(children, function (child) {\n                    return child ? child.props : false;\n                }) || [];\n                this.props.declareResources(resources.filter(function (r) {\n                    return r;\n                }));\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                appLayout = _props.appLayout,\n                catchAll = _props.catchAll,\n                customRoutes = _props.customRoutes,\n                dashboard = _props.dashboard,\n                logout = _props.logout,\n                menu = _props.menu,\n                _props$resources = _props.resources,\n                resources = _props$resources === undefined ? [] : _props$resources,\n                title = _props.title,\n                theme = _props.theme;\n\n\n            return _react2.default.createElement(\n                _reactRouterDom.Switch,\n                null,\n                customRoutes.filter(function (route) {\n                    return route.props.noLayout;\n                }).map(function (route, index) {\n                    return _react2.default.createElement(_reactRouterDom.Route, {\n                        key: index,\n                        exact: route.props.exact,\n                        path: route.props.path,\n                        render: function render(_ref) {\n                            var location = _ref.location;\n\n                            if (route.props.render) {\n                                return route.props.render({\n                                    location: location,\n                                    title: title,\n                                    theme: theme\n                                });\n                            }\n                            if (route.props.component) {\n                                return (0, _react.createElement)(route.props.component, {\n                                    location: location,\n                                    title: title,\n                                    theme: theme\n                                });\n                            }\n                        }\n                    });\n                }),\n                _react2.default.createElement(_reactRouterDom.Route, {\n                    path: '/',\n                    render: function render() {\n                        return (0, _react.createElement)(appLayout, {\n                            children: _react2.default.createElement(\n                                _reactRouterDom.Switch,\n                                null,\n                                customRoutes && customRoutes.map(function (route, index) {\n                                    return _react2.default.createElement(_reactRouterDom.Route, {\n                                        key: index,\n                                        exact: route.props.exact,\n                                        path: route.props.path,\n                                        component: route.props.component,\n                                        render: route.props.render,\n                                        children: route.props.children // eslint-disable-line react/no-children-prop\n                                    });\n                                }),\n                                resources.map(function (resource) {\n                                    return _react2.default.createElement(_reactRouterDom.Route, {\n                                        path: '/' + resource.name,\n                                        key: resource.name,\n                                        render: function render() {\n                                            return _react2.default.createElement(_CrudRoute2.default, {\n                                                resource: resource.name,\n                                                list: resource.list,\n                                                create: resource.create,\n                                                edit: resource.edit,\n                                                show: resource.show,\n                                                remove: resource.remove,\n                                                options: resource.options\n                                            });\n                                        }\n                                    });\n                                }),\n                                dashboard ? _react2.default.createElement(_reactRouterDom.Route, {\n                                    exact: true,\n                                    path: '/',\n                                    render: function render(routeProps) {\n                                        return _react2.default.createElement(\n                                            _Restricted2.default,\n                                            (0, _extends3.default)({\n                                                authParams: {\n                                                    route: 'dashboard'\n                                                }\n                                            }, routeProps),\n                                            _react2.default.createElement(dashboard)\n                                        );\n                                    }\n                                }) : resources[0] && _react2.default.createElement(_reactRouterDom.Route, {\n                                    exact: true,\n                                    path: '/',\n                                    render: function render() {\n                                        return _react2.default.createElement(_reactRouterDom.Redirect, {\n                                            to: '/' + resources[0].name\n                                        });\n                                    }\n                                }),\n                                _react2.default.createElement(_reactRouterDom.Route, { component: catchAll || _NotFound2.default })\n                            ),\n                            dashboard: dashboard,\n                            customRoutes: customRoutes.filter(function (route) {\n                                return !route.props.noLayout;\n                            }),\n                            logout: logout,\n                            menu: menu,\n                            catchAll: catchAll,\n                            title: title,\n                            theme: theme\n                        });\n                    }\n                })\n            );\n        }\n    }]);\n    return AdminRoutes;\n}(_react.Component);\n\nvar componentPropType = _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]);\n\nAdminRoutes.propTypes = {\n    appLayout: componentPropType,\n    authClient: _propTypes2.default.func,\n    children: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.node]),\n    catchAll: componentPropType,\n    customRoutes: _propTypes2.default.array,\n    dashboard: componentPropType,\n    declareResources: _propTypes2.default.func.isRequired,\n    logout: _propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func, _propTypes2.default.string]),\n    menu: componentPropType,\n    resources: _propTypes2.default.array,\n    theme: _propTypes2.default.object,\n    title: _propTypes2.default.node\n};\n\nAdminRoutes.defaultProps = {\n    appLayout: _Layout2.default\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n    return {\n        resources: Object.keys(state.admin.resources).map(function (key) {\n            return state.admin.resources[key].props;\n        })\n    };\n};\n\nexports.default = (0, _compose2.default)((0, _getContext2.default)({\n    authClient: _propTypes2.default.func\n}), (0, _reactRedux.connect)(mapStateToProps, {\n    declareResources: _actions.declareResources\n}))(AdminRoutes);"]},"metadata":{},"sourceType":"script"}