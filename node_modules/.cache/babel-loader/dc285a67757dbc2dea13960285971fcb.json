{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mergeInitialValuesWithDefaultValues = exports.FilterForm = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reduxForm = require('redux-form');\n\nvar _Card = require('material-ui/Card');\n\nvar _IconButton = require('material-ui/IconButton');\n\nvar _IconButton2 = _interopRequireDefault(_IconButton);\n\nvar _highlightOff = require('material-ui/svg-icons/action/highlight-off');\n\nvar _highlightOff2 = _interopRequireDefault(_highlightOff);\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _withProps = require('recompose/withProps');\n\nvar _withProps2 = _interopRequireDefault(_withProps);\n\nvar _autoprefixer = require('material-ui/utils/autoprefixer');\n\nvar _autoprefixer2 = _interopRequireDefault(_autoprefixer);\n\nvar _muiThemeable = require('material-ui/styles/muiThemeable');\n\nvar _muiThemeable2 = _interopRequireDefault(_muiThemeable);\n\nvar _lodash = require('lodash.set');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar getStyles = function getStyles(_ref) {\n  var primary1Color = _ref.palette.primary1Color;\n  return {\n    card: {\n      marginTop: '-14px',\n      paddingTop: 0,\n      display: 'flex',\n      justifyContent: 'flex-end',\n      alignItems: 'flex-end',\n      flexWrap: 'wrap'\n    },\n    body: {\n      display: 'flex',\n      alignItems: 'flex-end'\n    },\n    spacer: {\n      width: 48\n    },\n    icon: {\n      color: primary1Color || '#00bcd4',\n      paddingBottom: 0\n    },\n    clearFix: {\n      clear: 'right'\n    }\n  };\n};\n\nvar emptyRecord = {};\n\nvar FilterForm = exports.FilterForm = function (_Component) {\n  (0, _inherits3.default)(FilterForm, _Component);\n\n  function FilterForm() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, FilterForm);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref2 = FilterForm.__proto__ || Object.getPrototypeOf(FilterForm)).call.apply(_ref2, [this].concat(args))), _this), _this.handleHide = function (event) {\n      return _this.props.hideFilter(event.currentTarget.dataset.key);\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(FilterForm, [{\n    key: 'getShownFilters',\n    value: function getShownFilters() {\n      var _props = this.props,\n          filters = _props.filters,\n          displayedFilters = _props.displayedFilters,\n          initialValues = _props.initialValues;\n      return filters.filter(function (filterElement) {\n        return filterElement.props.alwaysOn || displayedFilters[filterElement.props.source] || typeof initialValues[filterElement.props.source] !== 'undefined';\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          resource = _props2.resource,\n          translate = _props2.translate,\n          muiTheme = _props2.muiTheme; // Use a fake prefixer when none is returned. Useful for tests\n\n      var prefix = (0, _autoprefixer2.default)(muiTheme) || function (style) {\n        return style;\n      };\n\n      var styles = getStyles(muiTheme);\n      return _react2.default.createElement('div', null, _react2.default.createElement(_Card.CardText, {\n        style: prefix(styles.card)\n      }, this.getShownFilters().reverse().map(function (filterElement) {\n        return _react2.default.createElement('div', {\n          key: filterElement.props.source,\n          'data-source': filterElement.props.source,\n          className: 'filter-field',\n          style: filterElement.props.style || prefix(styles.body)\n        }, filterElement.props.alwaysOn ? _react2.default.createElement('div', {\n          style: prefix(styles.spacer)\n        }, '\\xA0') : _react2.default.createElement(_IconButton2.default, {\n          iconStyle: prefix(styles.icon),\n          className: 'hide-filter',\n          onClick: _this2.handleHide,\n          'data-key': filterElement.props.source,\n          tooltip: translate('aor.action.remove_filter')\n        }, _react2.default.createElement(_highlightOff2.default, null)), _react2.default.createElement('div', null, _react2.default.createElement(_reduxForm.Field, (0, _extends3.default)({\n          allowEmpty: true\n        }, filterElement.props, {\n          name: filterElement.props.source,\n          component: filterElement.type,\n          resource: resource,\n          record: emptyRecord\n        }))));\n      })), _react2.default.createElement('div', {\n        style: prefix(styles.clearFix)\n      }));\n    }\n  }]);\n  return FilterForm;\n}(_react.Component);\n\nFilterForm.propTypes = {\n  resource: _propTypes2.default.string.isRequired,\n  filters: _propTypes2.default.arrayOf(_propTypes2.default.node).isRequired,\n  displayedFilters: _propTypes2.default.object.isRequired,\n  hideFilter: _propTypes2.default.func.isRequired,\n  initialValues: _propTypes2.default.object,\n  translate: _propTypes2.default.func.isRequired,\n  muiTheme: _propTypes2.default.object.isRequired\n};\n\nvar mergeInitialValuesWithDefaultValues = exports.mergeInitialValuesWithDefaultValues = function mergeInitialValuesWithDefaultValues(_ref3) {\n  var initialValues = _ref3.initialValues,\n      filters = _ref3.filters;\n  return {\n    initialValues: (0, _extends3.default)({}, filters.filter(function (filterElement) {\n      return filterElement.props.alwaysOn && filterElement.props.defaultValue;\n    }).reduce(function (acc, filterElement) {\n      return (0, _lodash2.default)((0, _extends3.default)({}, acc), filterElement.props.source, filterElement.props.defaultValue);\n    }, {}), initialValues)\n  };\n};\n\nvar enhance = (0, _compose2.default)((0, _muiThemeable2.default)(), _translate2.default, (0, _withProps2.default)(mergeInitialValuesWithDefaultValues), (0, _reduxForm.reduxForm)({\n  form: 'filterForm',\n  enableReinitialize: true,\n  onChange: function onChange(values, dispatch, props) {\n    return props.setFilters(values);\n  }\n}));\nexports.default = enhance(FilterForm);","map":{"version":3,"sources":["C:/Users/m2bab/VM/rd2/frontend/node_modules/admin-on-rest/lib/mui/list/FilterForm.js"],"names":["Object","defineProperty","exports","value","mergeInitialValuesWithDefaultValues","FilterForm","undefined","_extends2","require","_extends3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_reduxForm","_Card","_IconButton","_IconButton2","_highlightOff","_highlightOff2","_compose","_compose2","_withProps","_withProps2","_autoprefixer","_autoprefixer2","_muiThemeable","_muiThemeable2","_lodash","_lodash2","_translate","_translate2","obj","__esModule","default","getStyles","_ref","primary1Color","palette","card","marginTop","paddingTop","display","justifyContent","alignItems","flexWrap","body","spacer","width","icon","color","paddingBottom","clearFix","clear","emptyRecord","_Component","_ref2","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","getPrototypeOf","call","apply","concat","handleHide","event","props","hideFilter","currentTarget","dataset","key","getShownFilters","_props","filters","displayedFilters","initialValues","filter","filterElement","alwaysOn","source","render","_this2","_props2","resource","translate","muiTheme","prefix","style","styles","createElement","CardText","reverse","map","className","iconStyle","onClick","tooltip","Field","allowEmpty","name","component","type","record","Component","propTypes","string","isRequired","arrayOf","node","object","func","_ref3","defaultValue","reduce","acc","enhance","reduxForm","form","enableReinitialize","onChange","values","dispatch","setFilters"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.mergeInitialValuesWithDefaultValues = exports.FilterForm = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reduxForm = require('redux-form');\n\nvar _Card = require('material-ui/Card');\n\nvar _IconButton = require('material-ui/IconButton');\n\nvar _IconButton2 = _interopRequireDefault(_IconButton);\n\nvar _highlightOff = require('material-ui/svg-icons/action/highlight-off');\n\nvar _highlightOff2 = _interopRequireDefault(_highlightOff);\n\nvar _compose = require('recompose/compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _withProps = require('recompose/withProps');\n\nvar _withProps2 = _interopRequireDefault(_withProps);\n\nvar _autoprefixer = require('material-ui/utils/autoprefixer');\n\nvar _autoprefixer2 = _interopRequireDefault(_autoprefixer);\n\nvar _muiThemeable = require('material-ui/styles/muiThemeable');\n\nvar _muiThemeable2 = _interopRequireDefault(_muiThemeable);\n\nvar _lodash = require('lodash.set');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _translate = require('../../i18n/translate');\n\nvar _translate2 = _interopRequireDefault(_translate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getStyles = function getStyles(_ref) {\n    var primary1Color = _ref.palette.primary1Color;\n    return {\n        card: {\n            marginTop: '-14px',\n            paddingTop: 0,\n            display: 'flex',\n            justifyContent: 'flex-end',\n            alignItems: 'flex-end',\n            flexWrap: 'wrap'\n        },\n        body: { display: 'flex', alignItems: 'flex-end' },\n        spacer: { width: 48 },\n        icon: { color: primary1Color || '#00bcd4', paddingBottom: 0 },\n        clearFix: { clear: 'right' }\n    };\n};\n\nvar emptyRecord = {};\n\nvar FilterForm = exports.FilterForm = function (_Component) {\n    (0, _inherits3.default)(FilterForm, _Component);\n\n    function FilterForm() {\n        var _ref2;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, FilterForm);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref2 = FilterForm.__proto__ || Object.getPrototypeOf(FilterForm)).call.apply(_ref2, [this].concat(args))), _this), _this.handleHide = function (event) {\n            return _this.props.hideFilter(event.currentTarget.dataset.key);\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(FilterForm, [{\n        key: 'getShownFilters',\n        value: function getShownFilters() {\n            var _props = this.props,\n                filters = _props.filters,\n                displayedFilters = _props.displayedFilters,\n                initialValues = _props.initialValues;\n\n            return filters.filter(function (filterElement) {\n                return filterElement.props.alwaysOn || displayedFilters[filterElement.props.source] || typeof initialValues[filterElement.props.source] !== 'undefined';\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props2 = this.props,\n                resource = _props2.resource,\n                translate = _props2.translate,\n                muiTheme = _props2.muiTheme;\n\n            // Use a fake prefixer when none is returned. Useful for tests\n\n            var prefix = (0, _autoprefixer2.default)(muiTheme) || function (style) {\n                return style;\n            };\n            var styles = getStyles(muiTheme);\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    _Card.CardText,\n                    { style: prefix(styles.card) },\n                    this.getShownFilters().reverse().map(function (filterElement) {\n                        return _react2.default.createElement(\n                            'div',\n                            {\n                                key: filterElement.props.source,\n                                'data-source': filterElement.props.source,\n                                className: 'filter-field',\n                                style: filterElement.props.style || prefix(styles.body)\n                            },\n                            filterElement.props.alwaysOn ? _react2.default.createElement(\n                                'div',\n                                { style: prefix(styles.spacer) },\n                                '\\xA0'\n                            ) : _react2.default.createElement(\n                                _IconButton2.default,\n                                {\n                                    iconStyle: prefix(styles.icon),\n                                    className: 'hide-filter',\n                                    onClick: _this2.handleHide,\n                                    'data-key': filterElement.props.source,\n                                    tooltip: translate('aor.action.remove_filter')\n                                },\n                                _react2.default.createElement(_highlightOff2.default, null)\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                null,\n                                _react2.default.createElement(_reduxForm.Field, (0, _extends3.default)({\n                                    allowEmpty: true\n                                }, filterElement.props, {\n                                    name: filterElement.props.source,\n                                    component: filterElement.type,\n                                    resource: resource,\n                                    record: emptyRecord\n                                }))\n                            )\n                        );\n                    })\n                ),\n                _react2.default.createElement('div', { style: prefix(styles.clearFix) })\n            );\n        }\n    }]);\n    return FilterForm;\n}(_react.Component);\n\nFilterForm.propTypes = {\n    resource: _propTypes2.default.string.isRequired,\n    filters: _propTypes2.default.arrayOf(_propTypes2.default.node).isRequired,\n    displayedFilters: _propTypes2.default.object.isRequired,\n    hideFilter: _propTypes2.default.func.isRequired,\n    initialValues: _propTypes2.default.object,\n    translate: _propTypes2.default.func.isRequired,\n    muiTheme: _propTypes2.default.object.isRequired\n};\n\nvar mergeInitialValuesWithDefaultValues = exports.mergeInitialValuesWithDefaultValues = function mergeInitialValuesWithDefaultValues(_ref3) {\n    var initialValues = _ref3.initialValues,\n        filters = _ref3.filters;\n    return {\n        initialValues: (0, _extends3.default)({}, filters.filter(function (filterElement) {\n            return filterElement.props.alwaysOn && filterElement.props.defaultValue;\n        }).reduce(function (acc, filterElement) {\n            return (0, _lodash2.default)((0, _extends3.default)({}, acc), filterElement.props.source, filterElement.props.defaultValue);\n        }, {}), initialValues)\n    };\n};\n\nvar enhance = (0, _compose2.default)((0, _muiThemeable2.default)(), _translate2.default, (0, _withProps2.default)(mergeInitialValuesWithDefaultValues), (0, _reduxForm.reduxForm)({\n    form: 'filterForm',\n    enableReinitialize: true,\n    onChange: function onChange(values, dispatch, props) {\n        return props.setFilters(values);\n    }\n}));\n\nexports.default = enhance(FilterForm);"]},"metadata":{},"sourceType":"script"}